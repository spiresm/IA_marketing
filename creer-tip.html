<!DOCTYPE html>
<html lang="fr">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Partager un Tip / Prompt - iMarketing</title>

Â  Â  <link rel="preconnect" href="https://fonts.googleapis.com">
Â  Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
Â  Â  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
Â  Â  <link rel="preload" href="header.html" as="fetch" crossorigin="anonymous">
Â  Â  <link rel="preload" href="footer.html" as="fetch" crossorigin="anonymous">
Â  Â  <link rel="preload" href="log_ia.png" as="image">
Â  Â  <link rel="preload" href="Section-Clients-Logo-RTBF.png" as="image">

Â  Â  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
Â  Â  <link rel="stylesheet" href="style.css" />
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

Â  Â  <style>
Â  Â  Â  Â  /* Variables CSS (dÃ©finies ici pour la clartÃ© et cohÃ©rence, ou dÃ©placez dans style.css) */
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --primary-blue: #0077b6;
Â  Â  Â  Â  Â  Â  --dark-blue: #005f8a;
Â  Â  Â  Â  Â  Â  --light-blue: #64B5F6;
Â  Â  Â  Â  Â  Â  --lighter-blue: #42A5F5;
Â  Â  Â  Â  Â  Â  --background-grey: #f0f2f5;
Â  Â  Â  Â  Â  Â  --card-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
Â  Â  Â  Â  Â  Â  --card-hover-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  --success-bg: #d4edda;
Â  Â  Â  Â  Â  Â  --success-text: #155724;
Â  Â  Â  Â  Â  Â  --error-bg: #f8d7da;
Â  Â  Â  Â  Â  Â  --error-text: #dc3545;
Â  Â  Â  Â  Â  Â  --postit-yellow: #FFFAA0;
Â  Â  Â  Â  Â  Â  --light-blue-card: #E0F2F7;
Â  Â  Â  Â  Â  Â  --grey-text: #555;
Â  Â  Â  Â  Â  Â  --border-color: #ddd;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Styles pour le dÃ©filement et la mise en page gÃ©nÃ©rale */
Â  Â  Â  Â  html, body {
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  /* overflow-y: auto; -- sera gÃ©rÃ© par body.style.overflow en JS */
Â  Â  Â  Â  Â  Â  -webkit-overflow-scrolling: touch;
Â  Â  Â  Â  }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  opacity: 0; /* Garde l'opacitÃ© Ã  0 au dÃ©marrage pour l'animation */
Â  Â  Â  Â  Â  Â  transition: opacity 0.5s ease;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  font-family: 'Inter', sans-serif;
Â  Â  Â  Â  Â  Â  font-weight: 400;
Â  Â  Â  Â  Â  Â  background-color: var(--background-grey);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  overflow-x: hidden; /* EmpÃªche le dÃ©filement horizontal non dÃ©sirÃ© */
Â  Â  Â  Â  }

Â  Â  Â  Â  body.show {
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  }

Â  Â  Â  Â  main {
Â  Â  Â  Â  Â  Â  opacity: 0; /* Garde l'opacitÃ© Ã  0 au dÃ©marrage pour l'animation */
Â  Â  Â  Â  Â  Â  transition: opacity 0.5s ease;
Â  Â  Â  Â  Â  Â  padding: 40px 20px;
Â  Â  Â  Â  Â  Â  flex-grow: 1;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: flex-start;
Â  Â  Â  Â  Â  Â  overflow-y: auto; /* Permettre le dÃ©filement si le contenu du main est trop grand */
Â  Â  Â  Â  }

Â  Â  Â  Â  main.show {
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Styles du Loader - global pour toutes les pages */
Â  Â  Â  Â  #global-loader { /* RenommÃ© pour Ã©viter conflit avec le loader Vue */
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.9);
Â  Â  Â  Â  Â  Â  display: flex; /* Afficher par dÃ©faut pour le loader */
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  z-index: 9999;
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  transition: opacity 0.5s ease-out;
Â  Â  Â  Â  Â  Â  pointer-events: all;
Â  Â  Â  Â  }
Â  Â  Â  Â  #global-loader.hidden {
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  #global-loader .spinner {
Â  Â  Â  Â  Â  Â  border: 4px solid #f3f3f3;
Â  Â  Â  Â  Â  Â  border-top: 4px solid var(--primary-blue);
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  width: 40px;
Â  Â  Â  Â  Â  Â  height: 40px;
Â  Â  Â  Â  Â  Â  animation: spin 1s linear infinite;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes spin {
Â  Â  Â  Â  Â  Â  0% { transform: rotate(0deg); }
Â  Â  Â  Â  Â  Â  100% { transform: rotate(360deg); }
Â  Â  Â  Â  }
Â  Â  Â  Â  #global-loader p {
Â  Â  Â  Â  Â  Â  color: var(--primary-blue);
Â  Â  Â  Â  Â  Â  font-size: 1.1em;
Â  Â  Â  Â  }

Â  Â  Â  Â  #header-placeholder, #footer-placeholder {
Â  Â  Â  Â  Â  Â  flex-shrink: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  }

Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  max-width: 600px;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  background: #fff;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: var(--card-shadow);
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  }

Â  Â  Â  Â  .retour-lien {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  color: var(--primary-blue);
Â  Â  Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  font-size: 1.05em;
Â  Â  Â  Â  }

Â  Â  Â  Â  .retour-lien:hover {
Â  Â  Â  Â  Â  Â  text-decoration: underline;
Â  Â  Â  Â  }

Â  Â  Â  Â  label {
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }

Â  Â  Â  Â  input, select, textarea {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--border-color);
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  Â  Â  background: #f9fafb;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }

Â  Â  Â  Â  input:focus, select:focus, textarea:focus {
Â  Â  Â  Â  Â  Â  border-color: var(--primary-blue);
Â  Â  Â  Â  Â  Â  outline: none;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 0 2px rgba(0, 119, 182, 0.2);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Styles pour les champs URL dynamiques */
Â  Â  Â  Â  .url-input-group {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .url-input-group input[type="url"] {
Â  Â  Â  Â  Â  Â  flex-grow: 1;
Â  Â  Â  Â  Â  Â  margin-bottom: 0;
Â  Â  Â  Â  }

Â  Â  Â  Â  .url-action-buttons {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: flex-end;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .add-url-button, .remove-url-button {
Â  Â  Â  Â  Â  Â  padding: 8px 12px;
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  Â  Â  font-size: 0.9em;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: background-color 0.2s, transform 0.1s;
Â  Â  Â  Â  }

Â  Â  Â  Â  .add-url-button {
Â  Â  Â  Â  Â  Â  background-color: #28a745; /* Vert pour l'ajout */
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  .add-url-button:hover {
Â  Â  Â  Â  Â  Â  background-color: #218838;
Â  Â  Â  Â  Â  Â  transform: translateY(-1px);
Â  Â  Â  Â  }

Â  Â  Â  Â  .remove-url-button {
Â  Â  Â  Â  Â  Â  background-color: #dc3545; /* Rouge pour la suppression */
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  .remove-url-button:hover {
Â  Â  Â  Â  Â  Â  background-color: #c82333;
Â  Â  Â  Â  Â  Â  transform: translateY(-1px);
Â  Â  Â  Â  }

Â  Â  Â  Â  #drop-zone {
Â  Â  Â  Â  Â  Â  border: 2px dashed var(--primary-blue);
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  color: #777;
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: background 0.2s;
Â  Â  Â  Â  }

Â  Â  Â  Â  #drop-zone.dragover {
Â  Â  Â  Â  Â  Â  background: #e0f7ff;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Styles pour la grille de prÃ©visualisation des fichiers */
Â  Â  Â  Â  .file-preview-grid {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-preview-item {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  width: 100px;
Â  Â  Â  Â  Â  Â  height: 100px;
Â  Â  Â  Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  background-color: #f9f9f9;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-preview-item img.image-preview {
Â  Â  Â  Â  Â  Â  max-width: 100%;
Â  Â  Â  Â  Â  Â  max-height: 100%;
Â  Â  Â  Â  Â  Â  object-fit: contain;
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }

        /* Style pour les prÃ©visualisations vidÃ©o */
        .file-preview-item video.video-preview {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: block;
        }

Â  Â  Â  Â  .file-preview-item .file-icon {
Â  Â  Â  Â  Â  Â  font-size: 40px;
Â  Â  Â  Â  Â  Â  color: var(--primary-blue);
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-name-overlay {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  bottom: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  right: 0;
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.6);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  font-size: 0.7em;
Â  Â  Â  Â  Â  Â  padding: 3px 5px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  text-overflow: ellipsis;
Â  Â  Â  Â  }

Â  Â  Â  Â  .remove-file-button {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 5px;
Â  Â  Â  Â  Â  Â  right: 5px;
Â  Â  Â  Â  Â  Â  background-color: rgba(255, 0, 0, 0.7);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  width: 20px;
Â  Â  Â  Â  Â  Â  height: 20px;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  line-height: 1;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  }
Â  Â  Â  Â  .remove-file-button:hover {
Â  Â  Â  Â  Â  Â  background-color: red;
Â  Â  Â  Â  }

Â  Â  Â  Â  button[type="submit"] { /* SpÃ©cifique pour le bouton de soumission */
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 12px;
Â  Â  Â  Â  Â  Â  background: var(--primary-blue);
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  margin-top: 25px;
Â  Â  Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: background 0.2s;
Â  Â  Â  Â  }

Â  Â  Â  Â  button[type="submit"]:hover {
Â  Â  Â  Â  Â  Â  background: var(--dark-blue);
Â  Â  Â  Â  }

Â  Â  Â  Â  button[type="submit"]:disabled {
Â  Â  Â  Â  Â  Â  background-color: #cccccc;
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  }

Â  Â  Â  Â  .confirmation {
Â  Â  Â  Â  Â  Â  margin-top: 30px;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  background: var(--success-bg);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--success-text);
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  color: var(--success-text);
Â  Â  Â  Â  }

Â  Â  Â  Â  .confirmation img, .confirmation video { /* Ajout de .confirmation video */
Â  Â  Â  Â  Â  Â  max-width: 100px;
Â  Â  Â  Â  Â  Â  max-height: 100px;
Â  Â  Â  Â  Â  Â  object-fit: contain;
Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--border-color);
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: transform 0.2s ease-in-out;
Â  Â  Â  Â  }

Â  Â  Â  Â  .confirmation img:hover, .confirmation video:hover { /* Ajout de .confirmation video:hover */
Â  Â  Â  Â  Â  Â  transform: scale(1.05);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Loader interne au formulaire */
Â  Â  Â  Â  .loader {
Â  Â  Â  Â  Â  Â  display: block; /* S'assure qu'il est bien visible */
Â  Â  Â  Â  Â  Â  margin: 20px auto;
Â  Â  Â  Â  Â  Â  width: 40px;
Â  Â  Â  Â  Â  Â  height: 40px;
Â  Â  Â  Â  Â  Â  border: 4px solid var(--border-color);
Â  Â  Â  Â  Â  Â  border-top: 4px solid var(--primary-blue);
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  animation: spin 0.8s linear infinite;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Lightbox pour les images de confirmation */
Â  Â  Â  Â  .lightbox-overlay {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.8);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(5px);
Â  Â  Â  Â  }

Â  Â  Â  Â  .lightbox-content {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  max-width: 90%;
Â  Â  Â  Â  Â  Â  max-height: 90%;
Â  Â  Â  Â  Â  Â  background-color: #fff;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .lightbox-content img, .lightbox-content video { /* Ajout de .lightbox-content video */
Â  Â  Â  Â  Â  Â  max-width: 100%;
Â  Â  Â  Â  Â  Â  max-height: 100%;
Â  Â  Â  Â  Â  Â  object-fit: contain;
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }

Â  Â  Â  Â  .lightbox-close {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 10px;
Â  Â  Â  Â  Â  Â  right: 10px;
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  font-size: 30px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  z-index: 1001;
Â  Â  Â  Â  Â  Â  background-color: rgba(0,0,0,0.5);
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  width: 40px;
Â  Â  Â  Â  Â  Â  height: 40px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  line-height: 1;
Â  Â  Â  Â  Â  Â  text-shadow: 0 0 5px rgba(0,0,0,0.8);
Â  Â  Â  Â  }

Â  Â  Â  Â  .lightbox-close:hover {
Â  Â  Â  Â  Â  Â  color: #f00;
Â  Â  Â  Â  Â  Â  background-color: rgba(0,0,0,0.7);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Media Queries pour la responsivitÃ© */
Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  main {
Â  Â  Â  Â  Â  Â  Â  Â  padding: 20px 10px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  Â  Â  max-width: 100%; /* S'assure que le conteneur prend toute la largeur sur mobile */
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  form label {
Â  Â  Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  input, select, textarea {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 0.9em;
Â  Â  Â  Â  Â  Â  Â  Â  padding: 8px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .email-container {
Â  Â  Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  Â  Â  align-items: flex-start;
Â  Â  Â  Â  Â  Â  Â  Â  gap: 5px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  input[name="emailPrefix"] {
Â  Â  Â  Â  Â  Â  Â  Â  max-width: 100%;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .url-input-group {
Â  Â  Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  Â  Â  align-items: stretch;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .url-input-group input[type="url"] {
Â  Â  Â  Â  Â  Â  Â  Â  margin-bottom: 5px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .add-url-button, .remove-url-button, button[type="submit"] {
Â  Â  Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  Â  Â  box-sizing: border-box; /* S'assurer que le padding ne dÃ©borde pas */
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .file-preview-grid {
Â  Â  Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
Â  Â  Â  Â  Â  Â  Â  Â  gap: 8px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .file-preview-item {
Â  Â  Â  Â  Â  Â  Â  Â  width: 80px;
Â  Â  Â  Â  Â  Â  Â  Â  height: 80px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .file-preview-item .file-icon {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 30px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .remove-file-button {
Â  Â  Â  Â  Â  Â  Â  Â  width: 18px;
Â  Â  Â  Â  Â  Â  Â  Â  height: 18px;
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div id="global-loader">
Â  Â  Â  Â  <div class="spinner"></div>
Â  Â  Â  Â  <p>Chargement de la page...</p>
Â  Â  </div>

Â  Â  <div id="header-placeholder"></div>
Â  Â  <main>
Â  Â  Â  Â  <div id="app">
Â  Â  Â  Â  Â  Â  <div class="container">
Â  Â  Â  Â  Â  Â  Â  Â  <a href="/cas-usages.html" class="retour-lien">â† Retour</a>
Â  Â  Â  Â  Â  Â  Â  Â  <h2 style="text-align:center; color:var(--primary-blue);">Partager un Tip / workflow</h2>

Â  Â  Â  Â  Â  Â  Â  Â  <form @submit.prevent="submitForm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="auteur">Votre nom</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="auteur" v-model="auteur" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="" disabled>SÃ©lectionnez un nom</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option v-for="profilNom in profilsAuteurs" :key="profilNom" :value="profilNom">{{ profilNom }}</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p v-if="profilsAuteurs.length === 0 && !isLoadingProfils" style="color: var(--grey-text); font-size: 0.9em; margin-top: 5px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Aucun profil trouvÃ©. Assurez-vous d'avoir crÃ©Ã© des profils dans la section "Ã‰quipe" et que la fonction proxy est configurÃ©e.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p v-if="isLoadingProfils" style="color: var(--primary-blue); font-size: 0.9em; margin-top: 5px;">Chargement des noms de profils...</p>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="titre">Titre du Tip / Workflow</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="titre" v-model="titre" required />

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="description">Description</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="description" v-model="description" rows="4" required></textarea>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="previewText">Post-it</label> <textarea id="previewText" v-model="previewText" rows="2" placeholder="Un court extrait ou un rÃ©sumÃ© pour la prÃ©visualisation dans la galerie."></textarea>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="prompt">Prompt</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="prompt" v-model="promptText" rows="6" placeholder="Collez le prompt exact ici si c'est un prompt"></textarea>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="categorie">CatÃ©gorie</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="categorie" v-model="categorie">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="" disabled>SÃ©lectionnez une catÃ©gorie</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Marketing Digital</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>StratÃ©gie</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Communication & Image de Marque</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>RÃ©seaux Sociaux</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>SEO & Positionnement</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>PublicitÃ© Digitale</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Contenu & RÃ©daction</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Graphisme & Design Visuel</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Montage VidÃ©o & Audio</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Gestion de la Relation Client (CRM)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Ventes & Prospection</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Partenariats & Affiliation</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Analyse de DonnÃ©es & Reporting</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Automatisation & ProductivitÃ©</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Autres IA</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Autre</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="outil">Plateforme / Outil</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="outil" v-model="outil">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="" disabled>SÃ©lectionnez un outil</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option v-for="tool in toolsList" :key="tool.name" :value="tool.name">{{ tool.name }}</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option>Autre</option> </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" v-if="outil === 'Autre'" v-model="customOutil" placeholder="SpÃ©cifiez l'outil..." style="margin-top: 10px;" />

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="hidden" name="pageDePartage" value="Cas d'usages">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Lien(s) associÃ©(s) (optionnel)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div v-for="(url, index) in urls" :key="index" class="url-input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="url" v-model="urls[index]" :placeholder="`Lien ${index + 1}`" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" @click="removeUrlField(index)" class="remove-url-button">X</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="url-action-buttons">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" @click="addUrlField" class="add-url-button">Ajouter un lien</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="commentaireUrl">Commentaire / workflow</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="commentaireUrl" v-model="commentaireUrl" rows="2" placeholder="Ajoutez un commentaire sur les liens fournis."></textarea>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Images / Documents (optionnel)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="drop-zone"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  @click="triggerFile"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  @dragover.prevent="onDragOver"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  @dragleave="onDragLeave"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  @drop.prevent="onDrop"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  aria-live="polite"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  aria-atomic="true"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tabindex="0"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  role="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title="Cliquez ou dÃ©posez des fichiers ici">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DÃ©posez ou cliquez pour ajouter des images, GIFs, vidÃ©os (.mp4) ou documents (.txt, .pdf)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" ref="fileInput" accept="image/*, video/mp4, .txt, .pdf" style="display:none" @change="onFileChange" multiple />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p v-if="fileUploadError" style="color: red; margin-top: 5px;">{{ fileUploadError }}</p>


Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="file-preview-grid">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div v-for="(fileObj, index) in selectedFiles" :key="fileObj.id" class="file-preview-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img v-if="fileObj.type.startsWith('image/') && fileObj.type !== 'image/gif'" :src="fileObj.previewUrl" class="image-preview" :alt="fileObj.name" />
                            <img v-else-if="fileObj.type === 'image/gif'" :src="fileObj.previewUrl" class="image-preview gif-preview" :alt="fileObj.name" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <video v-else-if="fileObj.type.startsWith('video/')" :src="fileObj.previewUrl" class="video-preview" controls muted loop :alt="fileObj.name"></video>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span v-else class="file-icon">{{ getFileIcon(fileObj.type) }}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="file-name-overlay" :title="fileObj.name">{{ fileObj.name }}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="remove-file-button" @click="removeFile(fileObj.id)" :aria-label="`Supprimer le fichier ${fileObj.name}`">&times;</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div v-if="isLoading" class="loader" aria-label="Chargement en cours..."></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button v-else type="submit" :disabled="!auteur || !titre || !description || isLoading">Partager le Tip / Prompt</button>
Â  Â  Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="confirmation" v-if="confirmationVisible" role="status" aria-live="assertive">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>âœ… Tip / Prompt partagÃ© avec succÃ¨s !</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <template v-if="confirmationMediaUrls && confirmationMediaUrls.length > 0">
                        <template v-for="(media, index) in confirmationMediaUrls" :key="'conf-media-' + index">
                            <img v-if="media.type.startsWith('image/')" :src="media.url" @click="openLightbox(media.url, media.type)" style="margin: 5px;" :alt="`MÃ©dia de confirmation ${index + 1}`" />
                            <video v-else-if="media.type.startsWith('video/')" :src="media.url" @click="openLightbox(media.url, media.type)" style="margin: 5px;" :alt="`MÃ©dia de confirmation ${index + 1}`" controls muted loop></video>
                        </template>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </template>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <template v-if="confirmationUrls && confirmationUrls.length > 0 && confirmationUrls[0].trim() !== ''">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 style="margin-top: 15px; margin-bottom: 5px; color: #333;">Lien(s) enregistrÃ©(s):</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li v-for="(url, index) in confirmationUrls" :key="'conf-url-' + index" style="list-style-type: disc; margin-left: 20px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a :href="url" target="_blank" style="color: var(--primary-blue); word-break: break-all;">{{ url }}</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </template>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p v-if="confirmationCommentaireUrl && confirmationCommentaireUrl.trim()" style="white-space: pre-wrap; font-style: italic; font-size: 0.9em; color: var(--grey-text); margin-top: 10px;">{{ confirmationCommentaireUrl }}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="white-space: pre-wrap; font-weight: bold;">{{ confirmationTitre }}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="white-space: pre-wrap;">{{ confirmationDescription }}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p v-if="confirmationPreviewText && confirmationPreviewText.trim()" style="white-space: pre-wrap; font-family: monospace; background-color: #f0f0f0; padding: 10px; border-radius: 5px;">{{ confirmationPreviewText }}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p v-if="confirmationPromptText && confirmationPromptText.trim()" style="white-space: pre-wrap; font-family: monospace; background-color: #f0f0f0; padding: 10px; border-radius: 5px;">{{ confirmationPromptText }}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="margin-top: 15px; color: var(--primary-blue);">Redirection vers les cas d'usages dans 5 secondes...</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="lightbox-overlay" v-if="lightboxVisible" @click.self="closeLightbox" role="dialog" aria-modal="true" :aria-label="`AperÃ§u de l'image ${lightboxMediaUrl.split('/').pop()}`">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="lightbox-close" @click="closeLightbox" role="button" tabindex="0" aria-label="Fermer l'aperÃ§u du mÃ©dia">&times;</span>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="lightbox-content">
                    <img v-if="lightboxMediaType.startsWith('image/')" :src="lightboxMediaUrl" :alt="`Image en grand format : ${lightboxMediaUrl.split('/').pop()}`" />
                    <video v-else-if="lightboxMediaType.startsWith('video/')" :src="lightboxMediaUrl" :alt="`VidÃ©o en grand format : ${lightboxMediaUrl.split('/').pop()}`" controls autoplay loop></video>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>
Â  Â  </main>

Â  Â  <div id="footer-placeholder"></div>

Â  Â  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
Â  Â  <script src="tools-data.js"></script> <script>
Â  Â  Â  Â  // DÃ©finitions des URL pour les fonctions Netlify
Â  Â  Â  Â  const SAVE_TIP_URL = "/.netlify/functions/pushTip";
Â  Â  Â  Â  const GET_PROFILS_URL = "/.netlify/functions/getProfils";

Â  Â  Â  Â  // Global loader reference
Â  Â  Â  Â  const globalLoader = document.getElementById("global-loader");
Â  Â  Â  Â  const bodyElement = document.body;
Â  Â  Â  Â  const mainElement = document.querySelector("main");
Â  Â  Â  Â  const headerPlaceholder = document.getElementById("header-placeholder");
Â  Â  Â  Â  const footerPlaceholder = document.getElementById("footer-placeholder");

Â  Â  Â  Â  // Fonction utilitaire pour charger des composants HTML
Â  Â  Â  Â  async function loadComponent(url, placeholderId) {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const res = await fetch(url);
Â  Â  Â  Â  Â  Â  Â  Â  if (!res.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const errorDetail = await res.text();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(`HTTP error! status: ${res.status} - ${res.statusText}. URL: ${url}. Response: ${errorDetail.substring(0, 200)}...`);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById(placeholderId).innerHTML = await res.text();
Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Composant ${url} chargÃ© avec succÃ¨s dans #${placeholderId}.`);
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error(`Erreur lors du chargement de ${url}:`, error);
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById(placeholderId).innerHTML = `<p style='color:red;text-align:center;'>Erreur de chargement du composant: ${url}. (${error.message})</p>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  const { ref, createApp, onMounted, onUnmounted } = Vue;

Â  Â  Â  Â  const TipForm = {
Â  Â  Â  Â  Â  Â  setup() {
Â  Â  Â  Â  Â  Â  Â  Â  const auteur = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const titre = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const description = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const previewText = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const promptText = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const categorie = ref('Marketing Digital');
Â  Â  Â  Â  Â  Â  Â  Â  const outil = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const customOutil = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const fileInput = ref(null);
Â  Â  Â  Â  Â  Â  Â  Â  const urls = ref(['']);
Â  Â  Â  Â  Â  Â  Â  Â  const commentaireUrl = ref('');

Â  Â  Â  Â  Â  Â  Â  Â  const selectedFiles = ref([]);
Â  Â  Â  Â  Â  Â  Â  Â  let fileIdCounter = 0;
Â  Â  Â  Â  Â  Â  Â  Â  const fileUploadError = ref('');

Â  Â  Â  Â  Â  Â  Â  Â  const confirmationVisible = ref(false);
                const confirmationMediaUrls = ref([]); // Maintenant pour images et vidÃ©os
Â  Â  Â  Â  Â  Â  Â  Â  const confirmationUrls = ref([]);
Â  Â  Â  Â  Â  Â  Â  Â  const confirmationCommentaireUrl = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const confirmationTitre = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const confirmationDescription = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const confirmationPreviewText = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const confirmationPromptText = ref('');
Â  Â  Â  Â  Â  Â  Â  Â  const isLoading = ref(false); // Loader spÃ©cifique au formulaire
Â  Â  Â  Â  Â  Â  Â  Â  const profilsAuteurs = ref([]);
Â  Â  Â  Â  Â  Â  Â  Â  const isLoadingProfils = ref(true);

Â  Â  Â  Â  Â  Â  Â  Â  const lightboxVisible = ref(false);
Â  Â  Â  Â  Â  Â  Â  Â  const lightboxMediaUrl = ref(''); // RenommÃ© pour accueillir aussi les vidÃ©os
                const lightboxMediaType = ref(''); // Nouveau pour stocker le type de mÃ©dia dans la lightbox

Â  Â  Â  Â  Â  Â  Â  Â  // Utilisation de la variable globale toolsData
Â  Â  Â  Â  Â  Â  Â  Â  const toolsList = toolsData.sort((a, b) => a.name.localeCompare(b.name));

Â  Â  Â  Â  Â  Â  Â  Â  async function fetchProfils() {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("DÃ©but du chargement des profils...");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isLoadingProfils.value = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(GET_PROFILS_URL);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("RÃ©ponse de la fonction Netlify pour les profils:", response);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const errorText = await response.text();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(`Erreur HTTP lors de la rÃ©cupÃ©ration des profils: ${response.status} - ${errorText}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("DonnÃ©es brutes des profils reÃ§ues:", data);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const profilsList = Array.isArray(data) ? data : (data.profils || []);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const names = [...new Set(profilsList.map(p => typeof p === 'string' ? p : p.name).filter(Boolean))].sort();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  profilsAuteurs.value = names;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (names.length === 1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  auteur.value = names[0];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Un seul profil trouvÃ©, auteur auto-sÃ©lectionnÃ©:", auteur.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (names.length > 1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  auteur.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Plusieurs profils trouvÃ©s, veuillez sÃ©lectionner un auteur.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  auteur.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Aucun profil d'auteur trouvÃ©.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("Erreur lors du chargement des profils:", error);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error(`Impossible de charger la liste des profils. Veuillez vÃ©rifier que la fonction Netlify "${GET_PROFILS_URL.split('/').pop()}" existe et est correctement dÃ©ployÃ©e. DÃ©tails: ${error.message}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isLoadingProfils.value = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Fin du chargement des profils.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function addUrlField() {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  urls.value.push('');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Champ URL ajoutÃ©. URLs:", urls.value);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function removeUrlField(index) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  urls.value.splice(index, 1);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (urls.value.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  urls.value.push('');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Champ URL Ã  l'index ${index} supprimÃ©. URLs:`, urls.value);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function openLightbox(mediaUrl, mediaType) { // Mise Ã  jour pour accepter le type de mÃ©dia
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lightboxMediaUrl.value = mediaUrl;
                    lightboxMediaType.value = mediaType;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lightboxVisible.value = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Lightbox ouverte pour:", mediaUrl, "Type:", mediaType);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function closeLightbox() {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lightboxVisible.value = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lightboxMediaUrl.value = '';
                    lightboxMediaType.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Lightbox fermÃ©e.");
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function handleKeydown(event) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (event.key === 'Escape' && lightboxVisible.value) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  closeLightbox();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  onMounted(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Composant TipForm montÃ©.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetchProfils();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.addEventListener('keydown', handleKeydown);
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  onUnmounted(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.removeEventListener('keydown', handleKeydown);
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  function triggerFile() {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Clic sur la drop-zone, dÃ©clenchement de l'input fichier.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fileInput.value?.click();
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function onDragOver(e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Ã‰vÃ©nement dragover dÃ©tectÃ©.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.currentTarget.classList.add('dragover');
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function onDragLeave(e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Ã‰vÃ©nement dragleave dÃ©tectÃ©.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.currentTarget.classList.remove('dragover');
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function onDrop(e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Ã‰vÃ©nement drop dÃ©tectÃ©.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.currentTarget.classList.remove('dragover');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const files = e.dataTransfer.files;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (files.length) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Fichiers dÃ©posÃ©s:", files);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addFiles(files);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Aucun fichier dÃ©posÃ©.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function onFileChange(e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const files = e.target.files;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (files) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Fichiers sÃ©lectionnÃ©s via l'input:", files);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addFiles(files);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.target.value = null;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Aucun fichier sÃ©lectionnÃ© via l'input.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function addFiles(files) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fileUploadError.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < files.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const file = files[i];
                        // Mise Ã  jour des types de fichiers acceptÃ©s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (file.type.startsWith('image/') || file.type.startsWith('video/mp4') || file.type === 'text/plain' || file.type === 'application/pdf') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const newFileObj = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id: fileIdCounter++,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  file: file,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  previewUrl: null,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: file.name,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: file.type
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

                            // VÃ©rifier si c'est une image ou une vidÃ©o pour crÃ©er une URL de prÃ©visualisation
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (file.type.startsWith('image/') || file.type.startsWith('video/')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const reader = new FileReader();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reader.onload = (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (e.target.result && typeof e.target.result === 'string') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  newFileObj.previewUrl = e.target.result;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  selectedFiles.value.push(newFileObj);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.warn(`RÃ©sultat de lecture de mÃ©dia non valide pour ${file.name}. IgnorÃ©.`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fileUploadError.value = `Impossible de prÃ©visualiser le fichier ${file.name}.`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reader.onerror = (error) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error(`Erreur lecture fichier ${file.name}:`, error);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fileUploadError.value = `Erreur lors de la lecture du fichier ${file.name}.`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reader.readAsDataURL(file);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  selectedFiles.value.push(newFileObj);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fileUploadError.value = `Le fichier "${file.name}" de type "${file.type}" n'est pas pris en charge. Seules les images, les GIFs, les vidÃ©os MP4, les fichiers .txt et .pdf sont autorisÃ©s.`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.warn(fileUploadError.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("selectedFiles aprÃ¨s ajout:", selectedFiles.value);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function removeFile(fileIdToRemove) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  selectedFiles.value = selectedFiles.value.filter(fileObj => fileObj.id !== fileIdToRemove);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Fichier avec ID ${fileIdToRemove} supprimÃ©. selectedFiles:`, selectedFiles.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fileUploadError.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  function getFileIcon(fileType) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (fileType === 'text/plain') return 'TXT';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (fileType === 'application/pdf') return 'PDF';
                    if (fileType.startsWith('video/')) return 'â–¶ï¸ VID'; // IcÃ´ne pour les vidÃ©os
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return 'ğŸ“„';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  async function submitForm() {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Soumission du formulaire...");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!auteur.value || !titre.value.trim() || !description.value.trim()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("Veuillez remplir tous les champs obligatoires (Auteur, Titre, Description).");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.warn("Soumission bloquÃ©e: Champs obligatoires manquants.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Vous pouvez ajouter une alerte visuelle ici pour l'utilisateur
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (outil.value === 'Autre' && !customOutil.value.trim()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("Veuillez spÃ©cifier le nom de l'outil personnalisÃ©.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Alerte visuelle pour l'utilisateur
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationVisible.value = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isLoading.value = true; // Active le loader du formulaire
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Formulaire en cours de traitement (isLoading = true).");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const formData = new FormData();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('auteur', auteur.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('titre', titre.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('description', description.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('previewText', previewText.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('promptText', promptText.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('categorie', categorie.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('outil', outil.value === 'Autre' ? customOutil.value : outil.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('dateCreation', new Date().toISOString());

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // AJOUT IMPORTANT : Ajout du champ 'pageDePartage'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('pageDePartage', 'Cas d\'usages');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Champ 'pageDePartage' ajoutÃ© Ã  FormData: 'Cas d\'usages'.");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const filteredUrls = urls.value.filter(url => url.trim() !== '');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (filteredUrls.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('urls', JSON.stringify(filteredUrls));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("URLs ajoutÃ©es Ã  FormData:", filteredUrls);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('urls', '[]');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Aucune URL valide Ã  ajouter Ã  FormData.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (commentaireUrl.value.trim() !== '') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append('commentaireUrl', commentaireUrl.value.trim());
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Commentaire sur les URLs ajoutÃ© Ã  FormData:", commentaireUrl.value.trim());
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  selectedFiles.value.forEach((fileObj) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  formData.append(`files`, fileObj.file, fileObj.name);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Ajout du fichier ${fileObj.name} Ã  FormData.`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const tipResp = await fetch(SAVE_TIP_URL, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: formData
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("RÃ©ponse brute de la fonction pushTip:", tipResp);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!tipResp.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const errorText = await tipResp.text();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error(`Erreur HTTP lors de l'enregistrement du tip via Netlify Function: ${tipResp.status} - ${errorText}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(`Ã‰chec de l'enregistrement du tip: ${tipResp.status} - ${errorText}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const result = await tipResp.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("RÃ©sultat de l'enregistrement du tip via Netlify Function:", result);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationMediaUrls.value = [];
                        // Logique pour les URLs des mÃ©dias de confirmation
                        if (result.mediaUrls && Array.isArray(result.mediaUrls)) {
                            confirmationMediaUrls.value = result.mediaUrls;
                            console.log("MÃ©dias de confirmation dÃ©finis avec les URLs publiques de GitHub:", result.mediaUrls);
                        } else if (result.imageUrl) { // Fallback si seulement imageUrl est prÃ©sent
                            confirmationMediaUrls.value.push({ url: result.imageUrl, type: 'image/*' }); // Type gÃ©nÃ©rique
                        } else if (result.videoUrl) { // Fallback pour une vidÃ©o seule
                            confirmationMediaUrls.value.push({ url: result.videoUrl, type: 'video/mp4' });
                        }
                        
                        if (confirmationMediaUrls.value.length === 0 && selectedFiles.value.length > 0) {
                            // Utilisation des URL d'aperÃ§u local si le backend ne renvoie pas d'URLs de mÃ©dias
                            confirmationMediaUrls.value = selectedFiles.value
                                .filter(f => (f.type.startsWith('image/') || f.type.startsWith('video/')) && f.previewUrl)
                                .map(f => ({ url: f.previewUrl, type: f.type }));
                            console.log("Utilisation des URL d'aperÃ§u local pour la confirmation (backend n'a pas renvoyÃ© d'URLs).", confirmationMediaUrls.value);
                        }
                        if (confirmationMediaUrls.value.length === 0) {
                            console.log("Aucun mÃ©dia de confirmation disponible.");
                        }


Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationUrls.value = result.urls || [];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (confirmationUrls.value.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Aucune URL de confirmation disponible.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("URLs de confirmation disponibles:", confirmationUrls.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationCommentaireUrl.value = result.commentaireUrl || commentaireUrl.value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (confirmationCommentaireUrl.value.trim() === '') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Aucun commentaire URL de confirmation disponible.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Commentaire URL de confirmation disponible:", confirmationCommentaireUrl.value);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationTitre.value = titre.value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationDescription.value = description.value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationPreviewText.value = previewText.value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationPromptText.value = promptText.value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationVisible.value = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Confirmation affichÃ©e. Redirection dans 5 secondes...");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Redirection vers la galerie avec un message de succÃ¨s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = "cas-usages.html?success=1";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 5000);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("Erreur lors de la soumission du formulaire:", error);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error(`Une erreur est survenue lors de l'envoi du tip. Veuillez rÃ©essayer. DÃ©tails : ${error.message}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Vous pouvez afficher un message d'erreur visuel Ã  l'utilisateur ici
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isLoading.value = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Fin du traitement du formulaire (isLoading = false).");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  auteur, titre, description, previewText, promptText, categorie, outil, customOutil, fileInput,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  urls, addUrlField, removeUrlField, commentaireUrl,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  selectedFiles, fileUploadError,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationVisible,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationMediaUrls, confirmationUrls, confirmationCommentaireUrl, // confirmationMediaUrls au lieu de confirmationImageUrls
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmationTitre, confirmationDescription, confirmationPreviewText, confirmationPromptText,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isLoading, profilsAuteurs, isLoadingProfils, toolsList, // Exposer toolsList
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lightboxVisible, lightboxMediaUrl, lightboxMediaType, // lightboxMediaUrl et lightboxMediaType
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  openLightbox, closeLightbox,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  triggerFile, onDragOver, onDragLeave, onDrop, onFileChange,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  removeFile, getFileIcon, submitForm
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  // --- Initialisation au chargement du DOM ---
Â  Â  Â  Â  document.addEventListener("DOMContentLoaded", async () => {
Â  Â  Â  Â  Â  Â  console.log("Creer-Tip: DOMContentLoaded, dÃ©but de l'initialisation...");

Â  Â  Â  Â  Â  Â  // Masquer la barre de dÃ©filement du body au dÃ©but pour une meilleure expÃ©rience
Â  Â  Â  Â  Â  Â  bodyElement.style.overflow = 'hidden';

Â  Â  Â  Â  Â  Â  // 1. Charger les composants principaux (Header et Footer)
Â  Â  Â  Â  Â  Â  await loadComponent("header.html", "header-placeholder");
Â  Â  Â  Â  Â  Â  await loadComponent("footer.html", "footer-placeholder");

Â  Â  Â  Â  Â  Â  // 2. Mettre Ã  jour l'Ã©tat actif du menu aprÃ¨s le chargement du header
Â  Â  Â  Â  Â  Â  const currentPath = window.location.pathname.split('/').pop();
Â  Â  Â  Â  Â  Â  document.querySelectorAll('nav a').forEach(link => {
Â  Â  Â  Â  Â  Â  Â  Â  const linkHref = link.getAttribute('href');
Â  Â  Â  Â  Â  Â  Â  Â  const linkFileName = linkHref ? linkHref.split('/').pop() : '';
Â  Â  Â  Â  Â  Â  Â  Â  // SpÃ©cifie explicitement 'creer-tip.html' pour cette page
Â  Â  Â  Â  Â  Â  Â  Â  if (linkFileName === currentPath || (currentPath === "" && linkFileName === "index.html") || linkFileName === "creer-tip.html") {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  link.classList.add("active");
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  link.classList.remove("active");
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // 3. Monter l'application Vue.js
Â  Â  Â  Â  Â  Â  // L'application Vue sera responsable du loader interne et du contenu du formulaire.
Â  Â  Â  Â  Â  Â  createApp(TipForm).mount('#app');
Â  Â  Â  Â  Â  Â  console.log("Application Vue.js montÃ©e sur #app.");

Â  Â  Â  Â  Â  Â  // 4. Cacher le loader global et rÃ©vÃ©ler le contenu principal
Â  Â  Â  Â  Â  Â  if (globalLoader) {
Â  Â  Â  Â  Â  Â  Â  Â  globalLoader.classList.add("hidden");
Â  Â  Â  Â  Â  Â  Â  Â  globalLoader.addEventListener('transitionend', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (globalLoader.classList.contains('hidden')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  globalLoader.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }, { once: true });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  bodyElement.classList.add("show"); // RÃ©vÃ¨le le body avec sa transition
Â  Â  Â  Â  Â  Â  mainElement.classList.add("show"); // RÃ©vÃ¨le main avec sa transition
Â  Â  Â  Â  Â  Â  bodyElement.style.overflow = ''; // Restaurer le dÃ©filement du body

Â  Â  Â  Â  Â  Â  console.log("Creer-Tip: Initialisation terminÃ©e.");
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
