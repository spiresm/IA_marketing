<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Créer un Tip - Espace IA</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background-color: #f0f4f8;
      color: #333;
      visibility: hidden;
    }
    .container {
      max-width: 800px;
      margin: 40px auto;
      background: #ffffff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    }
    h1 {
      text-align: center;
      font-size: 1.8em;
      color: #0077b6;
      margin-bottom: 20px;
    }
    label {
      font-weight: 600;
      display: block;
      margin-top: 20px;
    }
    input, textarea, select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-top: 8px;
      font-size: 1em;
      background-color: #f9f9f9;
    }
    button {
      margin-top: 30px;
      padding: 12px 20px;
      border: none;
      background-color: #0077b6;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #005f8a;
    }
    .success {
      margin-top: 20px;
      color: green;
      font-weight: 600;
      text-align: center;
    }
    .preview {
      margin-top: 30px;
      padding: 15px;
      background: #e3f2fd;
      border-left: 5px solid #0077b6;
      border-radius: 8px;
    }
    .preview h2 {
      margin: 0 0 10px;
      color: #005f8a;
    }
    .preview p {
      margin: 0 0 10px;
    }
    .preview .meta {
      font-size: 0.9em;
      color: #666;
      font-style: italic;
    }
  </style>
</head>
<body>

  <div id="header-placeholder"></div>
  <script>
    fetch("header.html")
      .then(response => response.text())
      .then(data => {
        document.getElementById("header-placeholder").innerHTML = data;
        document.body.style.visibility = "visible";
      });
  </script>

  <main>
    <div class="container">
      <h1>Créer un Tip & Cas d’usage</h1>

      <label for="titre">Titre</label>
      <input type="text" id="titre" placeholder="Ex : Créer un visuel pour réseaux sociaux">

      <label for="description">Description</label>
      <textarea id="description" rows="3" placeholder="Décrivez brièvement l’usage ou le contexte"></textarea>

      <label for="prompt">Prompt</label>
      <textarea id="prompt" rows="4" placeholder="Exemple de prompt utilisable par l’IA"></textarea>

      <label for="outil">Outil IA utilisé</label>
      <select id="outil">
        <option value="">-- Sélectionnez --</option>
        <option>ChatGPT</option>
        <option>Claude</option>
        <option>Midjourney</option>
        <option>Firefly</option>
        <option>Perplexity</option>
        <option>Notion AI</option>
      </select>

      <label for="categorie">Catégorie</label>
      <select id="categorie">
        <option value="">-- Sélectionnez --</option>
        <option>Productivité</option>
        <option>Marketing Digital</option>
        <option>Graphisme</option>
        <option>Communication</option>
        <option>CRM</option>
        <option>Com. Presse & Influenceurs</option>
        <option>Partenariats & Évènements</option>
        <option>Positionnement</option>
        <option>Pôle Créa</option>
      </select>

      <button onclick="validerTip()">Enregistrer le tip</button>
      <div class="success" id="message-success" style="display:none">Tip enregistré avec succès ✅</div>
      <div id="preview-container"></div>
    </div>
  </main>

  <script>
    function validerTip() {
      const titre = document.getElementById('titre').value.trim();
      const description = document.getElementById('description').value.trim();
      const prompt = document.getElementById('prompt').value.trim();
      const outil = document.getElementById('outil').value;
      const categorie = document.getElementById('categorie').value;

      if (titre && description && prompt && outil && categorie) {
        const nouveau = { titre, description, prompt, outil, categorie };
        const existants = JSON.parse(localStorage.getItem('tips') || '[]');
        existants.push(nouveau);
        localStorage.setItem('tips', JSON.stringify(existants));

        document.getElementById('message-success').style.display = 'block';
        setTimeout(() => {
          document.getElementById('message-success').style.display = 'none';
        }, 3000);

        document.getElementById('preview-container').innerHTML = `
          <div class="preview">
            <h2>${titre}</h2>
            <p>${description}</p>
            <p><code>${prompt}</code></p>
            <p class="meta">Outil : ${outil} • Catégorie : ${categorie}</p>
          </div>
        `;

        document.querySelectorAll('input, textarea, select').forEach(e => e.value = '');
      } else {
        alert("Merci de remplir tous les champs.");
      }
    }
  </script>
</body>
</html>
