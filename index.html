<!DOCTYPE html>
<html lang="fr">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>Accueil - Espace IA</title>
Â  <link rel="stylesheet" href="style.css" />
Â  <style>
Â  Â  body {
Â  Â  Â  opacity: 0;
Â  Â  Â  transition: opacity 0.3s ease-in;
Â  Â  Â  margin: 0;
Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  background-color: #f2f4f8;
Â  Â  }

Â  Â  .section {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 30px;
Â  Â  Â  padding: 40px 20px;
Â  Â  }

Â  Â  .tile {
Â  Â  Â  background-color: #ffffff;
Â  Â  Â  width: 100%;
Â  Â  Â  max-width: 900px;
Â  Â  Â  border-left: 8px solid #0077b6;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  padding: 30px;
Â  Â  Â  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.05);
Â  Â  Â  text-align: center;
Â  Â  }

Â  Â  .tile h2 {
Â  Â  Â  margin-top: 0;
Â  Â  Â  color: #0077b6;
Â  Â  }

Â  Â  .tile p {
Â  Â  Â  color: #555;
Â  Â  Â  line-height: 1.6;
Â  Â  }

Â  Â  .chatgpt-wrapper {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: center;
Â  Â  Â  margin-top: 50px;
Â  Â  }

Â  Â  .chatgpt-box {
Â  Â  Â  width: 100%;
Â  Â  Â  max-width: 650px;
Â  Â  Â  background: #ffffff;
Â  Â  Â  border: 1px solid #dee2e6;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 119, 182, 0.1);
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 16px;
Â  Â  Â  padding: 24px;
Â  Â  Â  align-items: center;
Â  Â  }

Â  Â  .chatgpt-box h3 {
Â  Â  Â  margin: 0;
Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  text-align: center;
Â  Â  Â  color: #333;
Â  Â  Â  font-weight: bold;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  gap: 8px;
Â  Â  }

Â  Â  .chatgpt-box h3::before {
Â  Â  Â  content: "ğŸ’¬";
Â  Â  Â  font-size: 1.2rem;
Â  Â  }

Â  Â  .chatgpt-box textarea {
Â  Â  Â  width: 100%;
Â  Â  Â  max-width: 500px;
Â  Â  Â  margin: 0 auto;
Â  Â  Â  padding: 14px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  font-size: 1rem;
Â  Â  Â  resize: vertical;
Â  Â  Â  font-family: inherit;
Â  Â  }

Â  Â  .chatgpt-box .btn {
Â  Â  Â  padding: 12px 30px;
Â  Â  Â  background-color: #0077b6;
Â  Â  Â  color: #fff;
Â  Â  Â  font-weight: bold;
Â  Â  Â  font-size: 1rem;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  border: none;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: background-color 0.2s ease;
Â  Â  }

Â  Â  .chatgpt-box .btn:hover {
Â  Â  Â  background-color: #005f8c;
Â  Â  }

Â  Â  #reponse {
Â  Â  Â  white-space: pre-wrap;
Â  Â  Â  background: #f4faff;
Â  Â  Â  padding: 14px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  border: 1px solid #cce5ff;
Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  line-height: 1.4;
Â  Â  Â  color: #333;
Â  Â  Â  max-width: 500px;
Â  Â  Â  margin: 0 auto;
Â  Â  }
Â  </style>
</head>
<body>
Â  <div id="header-placeholder"></div>

Â  <div class="section">
Â  Â  <div class="tile">
Â  Â  Â  <h2>Bienvenue sur lâ€™espace IA Marketing</h2>
Â  Â  Â  <p>
Â  Â  Â  Â  Cette plateforme collaborative vous permet de dÃ©couvrir, partager et capitaliser sur les usages de lâ€™intelligence artificielle au sein de notre organisation. Que vous cherchiez des outils, des prompts, des cas dâ€™usage inspirants ou que vous souhaitez contribuer avec vos propres astuces, tout est centralisÃ© ici pour accompagner votre montÃ©e en compÃ©tence et faciliter lâ€™adoption de lâ€™IA au quotidien.
Â  Â  Â  </p>

Â  Â  Â  <div class="chatgpt-wrapper">
Â  Â  Â  Â  <div class="chatgpt-box">
Â  Â  Â  Â  Â  <h3>Discuter avec ChatGPT</h3>
Â  Â  Â  Â  Â  <textarea id="user-input" rows="4" placeholder="Pose ta question ici..."></textarea>
Â  Â  Â  Â  Â  <button class="btn" onclick="envoyer()">Envoyer</button>
Â  Â  Â  Â  Â  <pre id="reponse"></pre>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  <script>
Â  Â  function mettreAJourBulleDemandes() {
Â  Â  Â  const notif = document.getElementById("notif-count");
Â  Â  Â  // Ajout de logs pour le dÃ©bogage
Â  Â  Â  console.log("Recherche de #notif-count sur index.html :", notif);
Â  Â  Â  if (!notif) {
Â  Â  Â  Â  console.warn("L'Ã©lÃ©ment #notif-count n'a pas Ã©tÃ© trouvÃ© sur index.html. La bulle de notification ne peut pas Ãªtre mise Ã  jour.");
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  const demandes = JSON.parse(localStorage.getItem("demandesIA") || "[]");
Â  Â  Â  notif.textContent = demandes.length;
Â  Â  Â  notif.style.display = demandes.length > 0 ? "inline-block" : "none";
Â  Â  Â  console.log(`Bulle de notification mise Ã  jour sur index.html : ${demandes.length} demandes.`);
Â  Â  }

    // On utilise DOMContentLoaded pour s'assurer que le DOM est prÃªt
Â  Â  document.addEventListener("DOMContentLoaded", () => {
        console.log("DOM entiÃ¨rement chargÃ© pour index.html. DÃ©but de l'initialisation...");
Â  Â  Â  Â  fetch("header.html")
Â  Â  Â  Â  Â  Â  .then(res => {
                console.log("RÃ©ponse de fetch('header.html') reÃ§ue.");
                if (!res.ok) {
                    throw new Error(`Erreur HTTP lors du chargement du header: ${res.status}`);
                }
                return res.text();
            })
Â  Â  Â  Â  Â  Â  .then(data => {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("header-placeholder").innerHTML = data;
                console.log("Header HTML injectÃ©. Mise Ã  jour de la bulle de notification.");
Â  Â  Â  Â  Â  Â  Â  Â  mettreAJourBulleDemandes(); // Appeler APRÃˆS que le header soit injectÃ©
                
                // Gestion des liens actifs du menu (copiÃ© de galerie.html, bonne pratique)
                const path = location.pathname.split("/").pop();
                const links = document.querySelectorAll("nav a");
                links.forEach(link => {
                    // Si l'index est la page d'accueil (vide ou index.html)
                    if (path === "" || path === "index.html") {
                        if (link.getAttribute("href") === "index.html") {
                            link.classList.add("active");
                        }
                    } else if (link.getAttribute("href") === path) {
                        link.classList.add("active");
                    }
                });

Â  Â  Â  Â  Â  Â  Â  Â  document.body.style.opacity = "1"; // Rendre la page visible
Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  .catch(error => {
                console.error("Erreur critique lors du chargement du header sur index.html:", error);
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("header-placeholder").innerHTML =
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  "<p style='color:white;text-align:center'>Erreur de chargement du menu</p>";
Â  Â  Â  Â  Â  Â  Â  Â  document.body.style.opacity = "1"; // S'assurer que le body est visible mÃªme en cas d'erreur
                mettreAJourBulleDemandes(); // Tenter de la mettre Ã  jour mÃªme si le header n'a pas chargÃ© correctement
Â  Â  Â  Â  Â  Â  });
Â  Â  });


Â  Â  async function envoyer() {
Â  Â  Â  const userMessage = document.getElementById("user-input").value;
      document.getElementById("reponse").textContent = "Chargement..."; // Afficher un message de chargement

Â  Â  Â  const response = await fetch("/.netlify/functions/chat-clean", { // Assurez-vous que cette fonction existe et est dÃ©ployÃ©e
Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  body: JSON.stringify({ message: userMessage })
Â  Â  Â  });

Â  Â  Â  const text = await response.text();
Â  Â  Â  let data;

Â  Â  Â  try {
Â  Â  Â  Â  data = JSON.parse(text);
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  document.getElementById("reponse").textContent = "âŒ Erreur : rÃ©ponse non JSON\n" + text;
Â  Â  Â  Â  console.error("Erreur de parsing JSON de la rÃ©ponse de chat-clean:", e, text);
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  if (data.error) {
Â  Â  Â  Â  document.getElementById("reponse").textContent = `âŒ Erreur API : ${data.error}`;
Â  Â  Â  Â  console.error("Erreur renvoyÃ©e par l'API chat-clean:", data.error);
Â  Â  Â  } else {
Â  Â  Â  Â  document.getElementById("reponse").textContent = data.reply || "âœ… Pas de rÃ©ponse gÃ©nÃ©rÃ©e.";
Â  Â  Â  Â  console.log("RÃ©ponse de chat-clean reÃ§ue:", data.reply);
Â  Â  Â  }
Â  Â  }
Â  </script>
</body>
</html>
