// refonte visuelle plus aérée avec cartes en colonne alignées
import { useState } from 'react';

const toolsData = [
  {
    nom: "Microsoft Copilot (Bing Chat)",
    description: "Assistant IA intégré à Microsoft pour répondre aux requêtes, générer du contenu et aider à la productivité.",
    lien: "https://www.bing.com/chat",
    type: "texte",
    categories: ["redaction", "resume"],
    teams: ["CRM"],
    rtbf: false
  },
  {
    nom: "YouChat",
    description: "Assistant IA conversationnel intégré au moteur de recherche You.com.",
    lien: "https://you.com/search?q=chat",
    type: "texte",
    categories: ["resume"],
    teams: ["CRM"],
    rtbf: false
  },
  {
    nom: "Gemini",
    description: "Assistant conversationnel multimodal par Google (anciennement Bard).",
    lien: "https://gemini.google.com",
    type: "texte",
    categories: ["redaction", "resume"],
    teams: ["CRM"],
    rtbf: true
  },
  {
    nom: "Craiyon",
    description: "Générateur d’images gratuit à partir de texte (anciennement DALL-E Mini).",
    lien: "https://www.craiyon.com",
    type: "image",
    categories: ["generation"],
    teams: ["Com. Externe & Influenceurs"],
    rtbf: false
  },
  {
    nom: "Bing Image Creator",
    description: "Créateur d’images par Microsoft via DALL-E intégré à Bing.",
    lien: "https://www.bing.com/images/create",
    type: "image",
    categories: ["generation"],
    teams: ["Com. Externe & Influenceurs"],
    rtbf: false
  },
  {
    nom: "Pika",
    description: "Générateur vidéo IA créatif et interactif.",
    lien: "https://www.pika.art",
    type: "video",
    categories: ["generation"],
    teams: ["Marketing Digital"],
    rtbf: false
  },
  {
    nom: "Sora",
    description: "Générateur de vidéos à partir de texte par OpenAI.",
    lien: "https://openai.com/sora",
    type: "video",
    categories: ["generation"],
    teams: ["Marketing Digital"],
    rtbf: false
  },
  {
    nom: "Luma AI",
    description: "Outils 3D et vidéo IA pour créer des rendus immersifs.",
    lien: "https://lumalabs.ai",
    type: "video",
    categories: ["generation"],
    teams: ["Marketing Digital"],
    rtbf: false
  },
  {
    nom: "Kling AI",
    description: "Outil IA pour créer des vidéos réalistes à partir de texte.",
    lien: "https://kling.ai",
    type: "video",
    categories: ["generation"],
    teams: ["Marketing Digital"],
    rtbf: false
  },
  {
    nom: "Genny by Lovo",
    description: "Générateur de voix IA réaliste avec personnalisation de ton.",
    lien: "https://lovo.ai",
    type: "audio",
    categories: ["voice"],
    teams: ["Partenariats"],
    rtbf: false
  },
  {
    nom: "Murf",
    description: "Voix off IA pour vidéos, présentations et podcasts.",
    lien: "https://murf.ai",
    type: "audio",
    categories: ["voice"],
    teams: ["Partenariats"],
    rtbf: false
  },
  {
    nom: "Voicemaker",
    description: "Générateur de voix IA avec options avancées de synthèse.",
    lien: "https://voicemaker.in",
    type: "audio",
    categories: ["voice"],
    teams: ["Partenariats"],
    rtbf: false
  },
  {
    nom: "Suno.ai",
    description: "Générateur musical IA innovant pour créations originales.",
    lien: "https://suno.ai",
    type: "audio",
    categories: ["music"],
    teams: ["Marketing Digital"],
    rtbf: false
  },
  {
    nom: "MusicFX",
    description: "Générateur IA de loops et fonds musicaux.",
    lien: "https://googlecreativelab.github.io/musicfx/",
    type: "audio",
    categories: ["music"],
    teams: ["Marketing Digital"],
    rtbf: false
  },
  {
    nom: "Boomy",
    description: "Crée des morceaux de musique automatiquement grâce à l’IA.",
    lien: "https://boomy.com",
    type: "audio",
    categories: ["music"],
    teams: ["Marketing Digital"],
    rtbf: false
  },
  {
    nom: "Riffusion",
    description: "Musique IA générée à partir de spectrogrammes en temps réel.",
    lien: "https://riffusion.com",
    type: "audio",
    categories: ["music"],
    teams: ["Marketing Digital"],
    rtbf: false
  },
  {
    nom: "Jules",
    description: "Assistant IA français pour aider les étudiants à coder.",
    lien: "https://jules.education.gouv.fr",
    type: "texte",
    categories: ["code"],
    teams: ["CRM"],
    rtbf: false
  },
  {
    nom: "Devstral",
    description: "Plateforme IA de génération de code avec recommandations contextuelles.",
    lien: "https://devstral.com",
    type: "texte",
    categories: ["code"],
    teams: ["CRM"],
    rtbf: false
  },
  {
    nom: "Codeium",
    description: "Assistant IA de complétion de code open source.",
    lien: "https://codeium.com",
    type: "texte",
    categories: ["code"],
    teams: ["CRM"],
    rtbf: false
  },
  {
    nom: "Bolt",
    description: "Outil IA de génération de code instantanée.",
    lien: "https://boltai.io",
    type: "texte",
    categories: ["code"],
    teams: ["CRM"],
    rtbf: false
  },
  {
    nom: "Globe Explorer AI",
    description: "Explorateur cartographique intelligent pour données géographiques IA.",
    lien: "https://globeexplorer.ai",
    type: "texte",
    categories: ["exploration"],
    teams: ["Marketing Digital"],
    rtbf: false
  },
  {
    nom: "ChatPDF",
    description: "Lire, comprendre et discuter avec des PDF via une interface IA.",
    lien: "https://www.chatpdf.com",
    type: "texte",
    categories: ["resume"],
    teams: ["CRM"],
    rtbf: false
  },
  {
    nom: "Notion AI",
    description: "Assistant rédactionnel intégré à Notion pour améliorer la productivité.",
    lien: "https://www.notion.so/product/ai",
    type: "texte",
    categories: ["redaction", "organisation"],
    teams: ["CRM"],
    rtbf: false
  },
  {
    nom: "FireFlies",
    description: "Assistant de prise de notes automatisé pour réunions IA.",
    lien: "https://fireflies.ai",
    type: "audio",
    categories: ["transcription"],
    teams: ["Partenariats"],
    rtbf: false
  },
  {
    nom: "NotebookLM",
    description: "IA Google expérimentale pour résumer et comprendre des documents personnels.",
    lien: "https://notebooklm.google",
    type: "texte",
    categories: ["resume"],
    teams: ["CRM"],
    rtbf: false
  },
  {
    nom: "Quizlet",
    description: "Plateforme d’apprentissage et révision IA avec flashcards et tests.",
    lien: "https://quizlet.com",
    type: "texte",
    categories: ["education"],
    teams: ["Positionnement"],
    rtbf: false
  },
  {
    nom: "Coursera FR",
    description: "Plateforme de cours en ligne avec IA pour personnalisation d’apprentissage.",
    lien: "https://fr.coursera.org",
    type: "texte",
    categories: ["education"],
    teams: ["Positionnement"],
    rtbf: false
  },
  {
    nom: "DALL-E 3",
    description: "Générateur d’images à partir de texte par OpenAI (version avancée de DALL-E 2).",
    lien: "https://openai.com/dall-e",
    type: "image",
    categories: ["generation"],
    teams: ["Com. Externe & Influenceurs"],
    rtbf: true
  },
  {
    nom: "ChatGPT",
    description: "Assistant conversationnel basé sur GPT-4.",
    lien: "https://chat.openai.com",
    type: "texte",
    categories: ["redaction", "resume"],
    teams: ["CRM", "Com. Externe & Influenceurs"],
    rtbf: true
  },
  {
    nom: "Runway ML",
    description: "Outils de création vidéo IA.",
    lien: "https://runwayml.com",
    type: "video",
    categories: ["generation", "montage"],
    teams: ["Marketing Digital", "Com. Externe & Influenceurs"],
    rtbf: true
  },
  {
    nom: "Midjourney",
    description: "Générateur d'images créatives via Discord.",
    lien: "https://midjourney.com",
    type: "image",
    categories: ["generation"],
    teams: ["Com. Externe & Influenceurs"],
    rtbf: true
  },
  {
    nom: "Claude",
    description: "IA conversationnelle axée sur la sécurité et la fiabilité.",
    lien: "https://www.anthropic.com/index/claude",
    type: "texte",
    categories: ["redaction"],
    teams: ["CRM"],
    rtbf: true
  },
  {
    nom: "Perplexity AI",
    description: "Moteur de recherche IA conversationnel.",
    lien: "https://www.perplexity.ai",
    type: "texte",
    categories: ["resume"],
    teams: ["Marketing Digital"],
    rtbf: true
  },
  {
    nom: "Stable Diffusion",
    description: "Modèle open source de génération d'images.",
    lien: "https://stability.ai",
    type: "image",
    categories: ["generation"],
    teams: ["Marketing Digital"],
    rtbf: true
  },
  {
    nom: "Canva Magic Studio",
    description: "Outils IA de design dans Canva.",
    lien: "https://www.canva.com/magic/",
    type: "image",
    categories: ["generation", "edition"],
    teams: ["Com. Externe & Influenceurs"],
    rtbf: true
  },
  {
    nom: "HeyGen",
    description: "Génération vidéo par avatars IA.",
    lien: "https://www.heygen.com",
    type: "video",
    categories: ["generation"],
    teams: ["Marketing Digital"],
    rtbf: true
  },
  {
    nom: "ElevenLabs",
    description: "Synthèse vocale IA avancée.",
    lien: "https://elevenlabs.io",
    type: "audio",
    categories: ["voice"],
    teams: ["Partenariats"],
    rtbf: true
  }
];

const unique = (arr) => [...new Set(arr.flat())];
const teamColors = {
  "CRM": "bg-purple-200 text-purple-800",
  "Marketing Digital": "bg-blue-200 text-blue-800",
  "Com. Externe & Influenceurs": "bg-yellow-200 text-yellow-800",
  "Partenariats": "bg-green-200 text-green-800",
  "Positionnement": "bg-pink-200 text-pink-800"
};

export default function IaToolsAppPreview() {
  const [search, setSearch] = useState('');
  const [rtbfOnly, setRtbfOnly] = useState(false);
  const [type, setType] = useState('');
  const [categorie, setCategorie] = useState('');
  const [team, setTeam] = useState('');
  const [favorites, setFavorites] = useState([]);

  const allTypes = unique(toolsData.map(t => t.type));
  const allCategories = unique(toolsData.map(t => t.categories));
  const allTeams = unique(toolsData.map(t => t.teams));

  const toggleFavorite = (tool) => {
    setFavorites(prev =>
      prev.includes(tool.nom) ? prev.filter(f => f !== tool.nom) : [...prev, tool.nom]
    );
  };

  const filteredTools = toolsData.filter(tool => {
    const matchesSearch =
      tool.nom.toLowerCase().includes(search.toLowerCase()) ||
      tool.description.toLowerCase().includes(search.toLowerCase());
    const matchesRtbf = !rtbfOnly || tool.rtbf;
    const matchesType = !type || tool.type === type;
    const matchesCategorie = !categorie || tool.categories.includes(categorie);
    const matchesTeam = !team || tool.teams.includes(team);
    return matchesSearch && matchesRtbf && matchesType && matchesCategorie && matchesTeam;
  });

  return (
    <div className="px-6 py-10 max-w-7xl mx-auto bg-gradient-to-b from-gray-50 to-white">
      <h1 className="text-3xl font-bold mb-8 text-blue-700 text-center">Outils IA</h1>

      <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
        <input
          type="text"
          placeholder="🔍 Rechercher..."
          className="border border-gray-300 rounded-md p-2 shadow w-full"
          value={search}
          onChange={e => setSearch(e.target.value)}
        />
        <select className="p-2 border rounded-md shadow" value={type} onChange={e => setType(e.target.value)}>
          <option value="">Tous types</option>
          {allTypes.map(t => <option key={t}>{t}</option>)}
        </select>
        <select className="p-2 border rounded-md shadow" value={categorie} onChange={e => setCategorie(e.target.value)}>
          <option value="">Toutes catégories</option>
          {allCategories.map(c => <option key={c}>{c}</option>)}
        </select>
        <select className="p-2 border rounded-md shadow" value={team} onChange={e => setTeam(e.target.value)}>
          <option value="">Toutes équipes</option>
          {allTeams.map(t => <option key={t}>{t}</option>)}
        </select>
      </div>

      <label className="flex items-center mb-8 space-x-2">
        <input
          type="checkbox"
          checked={rtbfOnly}
          onChange={e => setRtbfOnly(e.target.checked)}
        />
        <span>✅ Testé par la RTBF uniquement</span>
      </label>

      <div className="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        {filteredTools.map(tool => (
          <div
            key={tool.nom}
            className="relative bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-gray-200 overflow-hidden"
          >
            <button
              onClick={() => toggleFavorite(tool)}
              className="absolute top-2 right-3 text-xl hover:scale-110"
              title="Favori"
            >
              {favorites.includes(tool.nom) ? '★' : '☆'}
            </button>
            <a href={tool.lien} target="_blank" rel="noopener noreferrer" className="block p-4">
              <h2 className="text-lg font-semibold text-indigo-600 mb-1 truncate">{tool.nom}</h2>
              <p className="text-sm text-gray-600 mb-3 h-16 overflow-hidden leading-snug">{tool.description}</p>
              <p className="text-xs text-gray-500"><strong>Type :</strong> {tool.type}</p>
              <p className="text-xs text-gray-500"><strong>Catégories :</strong> {tool.categories.join(', ')}</p>
              <div className="mt-2 flex flex-wrap gap-1">
                {tool.teams.map(team => (
                  <span
                    key={team}
                    className={`px-2 py-0.5 rounded text-xs font-medium ${teamColors[team] || 'bg-gray-100 text-gray-800'}`}
                  >
                    {team}
                  </span>
                ))}
              </div>
              {tool.rtbf && <span className="inline-block mt-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded">✅ RTBF</span>}
            </a>
          </div>
        ))}
      </div>
    </div>
  );
}
