<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Accueil - Espace IA</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* VOTRE CSS COMPLET DE 200+ LIGNES EST ICI ET RESTE INCHANGÃ‰ */
        :root {
            --primary-blue: #0077b6;
            --dark-blue: #005f8a;
            --light-blue: #64B5F6;
            --background-grey: #f0f2f5;
            --card-shadow: 0 4px 15px rgba(0,0,0,0.08);
            --grey-text: #555;
            --border-color: #ccc;
            --error-text: #dc3545;
        }
        body {
            font-family: 'Segoe UI', 'Inter', sans-serif;
            margin: 0;
            background-color: var(--background-grey);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            padding: 40px 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        .nav-wrapper {
            background-color: var(--primary-blue);
            width: 100%;
            position: relative;
            flex-shrink: 0;
            padding: 5px 0;
        }
        .menu-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 30px;
            box-sizing: border-box;
        }
        nav {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }
        nav a {
            text-decoration: none;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
            padding: 10px 18px;
            border-radius: 8px;
            transition: background 0.3s ease;
            margin: 0 5px;
            white-space: nowrap;
            position: relative;
        }
        nav a:hover, nav a.active {
            background-color: white;
            color: var(--primary-blue);
        }
        .notif-bubble {
            position: absolute; top: 0px; right: 0px; background: red; color: white;
            border-radius: 50%; padding: 2px 6px; font-size: 12px; font-weight: bold;
            display: none;
        }
        .content-section {
            max-width: 960px;
            width: 100%;
            margin: 0 auto;
            padding: 20px;
            box-sizing: border-box;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            position: relative;
        }
        .content-section h2, .content-section h3 {
            text-align: center;
            color: var(--dark-blue);
            margin-top: 0;
            margin-bottom: 20px;
        }
        .latest-additions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }
        .addition-card {
            background: #f9f9f9;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .addition-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        .card-content-wrapper {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .card-top-meta {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 5px;
        }
        .addition-card h4 {
            font-size: 1.3em;
            margin: 0;
            color: var(--dark-blue);
        }
        .addition-card .card-subtitle {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
            margin-top: 5px;
            margin-bottom: 10px;
        }
        .addition-card .card-image-container {
            width: 100%;
            height: 0;
            padding-bottom: 56.25%;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            margin: 10px 0;
            flex-shrink: 0;
            background-color: #eee;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .addition-card .card-image-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        .addition-card .card-image-container .fa-image,
        .addition-card .card-image-container .fa-video {
            font-size: 40px;
            color: #ccc;
        }
        .addition-card p {
            color: var(--grey-text);
            flex-grow: 1;
            margin-top: 0;
        }
        .outil-badge {
            background-color: #e9ecef;
            color: #495057;
            font-size: 0.8em;
            font-weight: 500;
            padding: 5px 12px;
            border-radius: 15px;
            white-space: nowrap;
            text-decoration: none;
            display: inline-block;
        }
        .chaine-text-color {
            font-size: 0.9em;
            font-weight: bold;
            white-space: nowrap;
        }
        .addition-card .card-meta {
            margin-top: 0px;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            gap: 5px;
            font-size: 0.85em;
            color: var(--grey-text);
            text-align: left;
        }
        .addition-card .card-meta span {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .meta-line {
            font-size: 0.9em;
            color: var(--grey-text);
        }
        .meta-line strong {
            font-weight: bold;
            color: #333;
        }
        .meta-line a {
            color: inherit;
            text-decoration: none;
        }
        .meta-line a:hover {
            text-decoration: underline;
        }
        .meta-line .chaine-value {
            font-weight: bold;
        }
        .addition-card .view-button {
            display: block;
            text-align: center;
            margin-top: 15px;
            padding: 10px 15px;
            background-color: var(--primary-blue);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .addition-card .view-button:hover {
            background-color: var(--dark-blue);
        }
        .veille-scroll-container {
            position: relative;
            width: 100%;
            overflow: hidden;
        }
        .veille-inner-scroll-container { 
            position: relative;
            padding: 0 45px;
            box-sizing: border-box;
        }
        .veille-grid {
            display: flex;
            flex-wrap: nowrap;
            gap: 20px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scroll-behavior: auto;
            padding-bottom: 15px;
            scrollbar-width: none;
            -ms-overflow-style: none; 
        }
        .veille-grid::-webkit-scrollbar {
            display: none;
        }
        .veille-card {
            flex: 0 0 280px;
            min-width: 280px;
            background: #f9f9f9;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            padding: 15px;
        }
        .veille-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.08);
        }
        .veille-card .card-content-wrapper {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            padding: 0;
            justify-content: space-between;
            overflow: visible;
        }
        .veille-card .spacer {
            flex-grow: 1;
            min-height: 10px;
        }
        .veille-card h4 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.2em;
            color: var(--dark-blue);
            white-space: normal;
        }
        .veille-card p {
            font-size: 0.95em;
            color: var(--grey-text);
            line-height: 1.5;
            margin-bottom: 0;
        }
        .veille-card p:empty {
            margin: 0;
            padding: 0;
            height: 0;
        }
        .veille-card p.meta-line {
            font-size: 0.9em;
            color: var(--grey-text);
            margin-top: 5px;
            margin-bottom: 10px;
        }
        .veille-card p.meta-line strong {
            font-weight: bold;
            color: #333;
        }
        .veille-card .tag {
            background: #e0e0e0;
            color: #495057;
            padding: 0.2rem 0.5rem;
            border-radius: 6px;
            font-size: 0.8rem;
            display: inline-block;
            margin-left: 5px;
            white-space: nowrap;
        }
        .veille-card .source-info {
            font-size: 0.85em;
            color: #666;
            text-align: left;
            margin-top: 5px;
            margin-bottom: 0;
        }
        .veille-card a {
            color: #007acc; 
            text-decoration: none;
        }
        .veille-card a:hover {
            text-decoration: underline;
        }
        .veille-card .article-action-button { 
            display: block;
            text-align: center;
            margin-top: 15px;
            padding: 6px 10px;
            background-color: var(--primary-blue);
            color: white;
            text-decoration: none;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            transition: background-color 0.2s;
            white-space: nowrap;
            box-sizing: border-box;
            font-size: 0.8em;
        }
        .veille-card .article-action-button:hover {
            background-color: var(--dark-blue);
        }
        .scroll-arrow {
            background-color: var(--primary-blue);
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 50%;
            font-size: 1.2em;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            transition: background-color 0.2s ease, transform 0.2s ease, opacity 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }
        .scroll-arrow:hover {
            background-color: var(--dark-blue);
            transform: translateY(-50%) scale(1.1);
        }
        .scroll-arrow.left {
            left: 0;
            transform: translateY(-50%) translateX(-100%);
        }
        .scroll-arrow.right {
            right: 0;
            transform: translateY(-50%) translateX(100%);
        }
        .content-section.veille-section-container {
            position: relative;
            padding-left: 20px;
            padding-right: 20px;
        }
        .news-ticker-section {
            display: flex;
            align-items: center;
            position: relative;
        }
        .news-ticker-section .icon {
            font-size: 1.5em;
            color: var(--primary-blue);
            margin-right: 15px;
            flex-shrink: 0;
        }
        .news-ticker-container {
            flex-grow: 1;
            overflow: hidden;
            margin-right: 15px;
        }
        .news-ticker-content {
            display: flex;
            white-space: nowrap;
            animation: ticker 30s linear infinite;
        }
        .news-ticker-content:hover {
            animation-play-state: paused;
        }
        .news-item {
            padding-right: 40px;
        }
        .news-item .author-info {
            color: black;
            font-weight: normal;
            font-style: italic;
            font-size: 0.85em;
            margin-left: 5px;
        }
        @keyframes ticker {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .message-button {
            background-color: var(--primary-blue);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: bold;
            text-decoration: none;
            white-space: nowrap;
            transition: background-color 0.2s ease;
            flex-shrink: 0;
        }
        .message-button:hover {
            background-color: var(--dark-blue);
        }
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: auto;
            width: 100%;
        }
        @media (max-width: 768px) {
            .latest-additions-grid {
                grid-template-columns: 1fr;
            }
            .veille-grid {
                flex-wrap: nowrap;
                overflow-x: auto;
            }
            .content-section.veille-section-container {
                padding-left: 20px;
                padding-right: 20px;
            }
            .scroll-arrow.left {
                left: 0px;
                transform: translateY(-50%) translateX(-100%);
            }
            .scroll-arrow.right {
                right: 0px;
                transform: translateY(-50%) translateX(100%);
            }
            nav { justify-content: flex-start; overflow-x: auto; }
            .news-ticker-section {
                flex-direction: column;
                align-items: flex-start;
            }
            .news-ticker-section .icon {
                margin-bottom: 10px;
                margin-right: 0;
            }
            .news-ticker-container {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
            .message-button {
                width: 100%;
                text-align: center;
            }
            main {
                padding: 20px 10px; 
            }
        }
    </style>
</head>
<body>

    <div class="nav-wrapper">
        <div class="menu-container">
            <nav>
                <a href="index.html" class="active">Accueil</a>
                <a href="equipe.html">Ã‰quipe</a>
                <a href="outils.html">Outils</a>
                <a href="galerie.html">Prompts</a>
                <a href="cas-usages.html">Workflows</a>
                <a href="charte.html">Chartes</a>
                <a href="faq.html">FAQ</a>
                <a href="demandes_ia.html">Demandes<span class="notif-bubble" id="notif-count">0</span></a>
                <a href="gestion-license.html">Licenses</a>
            </nav>
        </div>
    </div>

    <main>
        <section class="content-section veille-section-container">
            <h3>Veille IA & Marketing</h3>
            <div class="veille-scroll-container">
                <div class="veille-inner-scroll-container"> 
                    <div id="veille-articles-grid" class="veille-grid">
                        <p>Chargement de la veille...</p>
                    </div>
                </div>
            </div>
            <button class="scroll-arrow left" id="veille-scroll-left"><i class="fas fa-chevron-left"></i></button>
            <button class="scroll-arrow right" id="veille-scroll-right"><i class="fas fa-chevron-right"></i></button>
        </section>

        <section class="news-ticker-section content-section">
            <i class="fas fa-newspaper icon"></i>
            <div class="news-ticker-container">
                <div class="news-ticker-content" id="newsTickerContent">
                    <span>Chargement des actualitÃ©s...</span>
                </div>
            </div>
            <a href="admin-news.html" class="message-button">Laisser un message</a>
        </section>

        </main>
    
    <footer id="footer-placeholder">
        <p>&copy; 2025 Espace IA. Tous droits rÃ©servÃ©s.</p>
    </footer>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        // Le script est simplifiÃ© pour ne gÃ©rer que l'interactivitÃ© de la page,
        // et non plus le chargement du contenu qui est dÃ©lÃ©guÃ© Ã  n8n.

        // --- Logique pour le bandeau d'actualitÃ©s ---
        async function loadNewsTicker() {
            const newsTickerContent = document.getElementById('newsTickerContent');
            if (!newsTickerContent) return;
            
            try {
                const response = await fetch('news-data.json');
                if (!response.ok) throw new Error('Fichier news introuvable.');

                const newsItems = await response.json();
                if (newsItems.length > 0) {
                    let fullTextHtml = newsItems.map(item => {
                        const messageColor = item.color || "#333";
                        let fullText = escapeHtml(item.title);
                        let infoParts = [];
                        if (item.collaborateur && item.collaborateur !== 'Non spÃ©cifiÃ©') {
                            infoParts.push(escapeHtml(item.collaborateur));
                        }
                        if (item.pole && item.pole !== 'Autre') {
                            infoParts.push(escapeHtml(item.pole));
                        }
                        if (infoParts.length > 0) {
                            fullText += `<span class="author-info"> (${infoParts.join(' - ')})</span>`;
                        }
                        return `<span class="news-item" style="color: ${messageColor};">${fullText}</span>`;
                    }).join('');
                    
                    // Duplication pour l'effet de dÃ©filement
                    newsTickerContent.innerHTML = fullTextHtml + fullTextHtml;
                } else {
                    newsTickerContent.innerHTML = '<span>Aucune actualitÃ© pour le moment.</span>';
                }
            } catch (error) {
                console.error("Erreur chargement news:", error);
                newsTickerContent.innerHTML = '<span>Impossible de charger les actualitÃ©s.</span>';
            }
        }

        // --- Logique pour les flÃ¨ches de la section Veille ---
        const veilleGrid = document.getElementById('veille-articles-grid');
        const scrollLeftBtn = document.getElementById('veille-scroll-left');
        const scrollRightBtn = document.getElementById('veille-scroll-right');

        if (veilleGrid && scrollLeftBtn && scrollRightBtn) {
            const scrollAmount = 300; // DÃ©filement fixe
            scrollLeftBtn.addEventListener('click', () => {
                veilleGrid.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
            });
            scrollRightBtn.addEventListener('click', () => {
                veilleGrid.scrollBy({ left: scrollAmount, behavior: 'smooth' });
            });
        }
        
        // --- Navigation Active ---
        try {
            const currentPath = window.location.pathname.split('/').pop() || "index.html";
            document.querySelectorAll('nav a').forEach(link => {
                const linkHref = new URL(link.href).pathname.split('/').pop();
                if (linkHref === currentPath) {
                    link.classList.add("active");
                }
            });
        } catch (e) {
            console.error("Erreur lors de la mise Ã  jour de la navigation active:", e);
        }

        // --- Fonctions utilitaires ---
        function escapeHtml(text) {
            if (text === null || text === undefined) return '';
            const map = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;' };
            return String(text).replace(/[&<>"']/g, m => map[m]);
        }

        // Lancement des fonctions au chargement
        loadNewsTicker();
    });
    </script>
</body>
</html>
