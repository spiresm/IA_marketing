<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Accueil - Espace IA</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* VOTRE CSS COMPLET DE 200+ LIGNES EST ICI ET RESTE INCHANGÉ */
        :root {
            --primary-blue: #0077b6;
            --dark-blue: #005f8a;
            --light-blue: #64B5F6;
            --background-grey: #f0f2f5;
            --card-shadow: 0 4px 15px rgba(0,0,0,0.08);
            --grey-text: #555;
            --border-color: #ccc;
            --error-text: #dc3545;
        }
        body {
            font-family: 'Segoe UI', 'Inter', sans-serif;
            margin: 0;
            background-color: var(--background-grey);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            padding: 40px 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        .nav-wrapper {
            background-color: var(--primary-blue);
            width: 100%;
            position: relative;
            flex-shrink: 0;
            padding: 5px 0;
        }
        .menu-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 30px;
            box-sizing: border-box;
        }
        nav {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }
        nav a {
            text-decoration: none;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
            padding: 10px 18px;
            border-radius: 8px;
            transition: background 0.3s ease;
            margin: 0 5px;
            white-space: nowrap;
            position: relative;
        }
        nav a:hover, nav a.active {
            background-color: white;
            color: var(--primary-blue);
        }
        .notif-bubble {
            position: absolute; top: 0px; right: 0px; background: red; color: white;
            border-radius: 50%; padding: 2px 6px; font-size: 12px; font-weight: bold;
            display: none;
        }
        .content-section {
            max-width: 960px;
            width: 100%;
            margin: 0 auto;
            padding: 20px;
            box-sizing: border-box;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            position: relative;
        }
        .content-section h2, .content-section h3 {
            text-align: center;
            color: var(--dark-blue);
            margin-top: 0;
            margin-bottom: 20px;
        }
        .latest-additions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }
        .addition-card {
            background: #f9f9f9;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .addition-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        .card-content-wrapper {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .card-top-meta {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 5px;
        }
        .addition-card h4 {
            font-size: 1.3em;
            margin: 0;
            color: var(--dark-blue);
        }
        .addition-card .card-subtitle {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
            margin-top: 5px;
            margin-bottom: 10px;
        }
        .addition-card .card-image-container {
            width: 100%;
            height: 0;
            padding-bottom: 56.25%;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            margin: 10px 0;
            flex-shrink: 0;
            background-color: #eee;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .addition-card .card-image-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        .addition-card .card-image-container .fa-image,
        .addition-card .card-image-container .fa-video {
            font-size: 40px;
            color: #ccc;
        }
        .addition-card p {
            color: var(--grey-text);
            flex-grow: 1;
            margin-top: 0;
        }
        .outil-badge {
            background-color: #e9ecef;
            color: #495057;
            font-size: 0.8em;
            font-weight: 500;
            padding: 5px 12px;
            border-radius: 15px;
            white-space: nowrap;
            text-decoration: none;
            display: inline-block;
        }
        .chaine-text-color {
            font-size: 0.9em;
            font-weight: bold;
            white-space: nowrap;
        }
        .addition-card .card-meta {
            margin-top: 0px;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            gap: 5px;
            font-size: 0.85em;
            color: var(--grey-text);
            text-align: left;
        }
        .addition-card .card-meta span {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .meta-line {
            font-size: 0.9em;
            color: var(--grey-text);
        }
        .meta-line strong {
            font-weight: bold;
            color: #333;
        }
        .meta-line a {
            color: inherit;
            text-decoration: none;
        }
        .meta-line a:hover {
            text-decoration: underline;
        }
        .meta-line .chaine-value {
            font-weight: bold;
        }
        .addition-card .view-button {
            display: block;
            text-align: center;
            margin-top: 15px;
            padding: 10px 15px;
            background-color: var(--primary-blue);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .addition-card .view-button:hover {
            background-color: var(--dark-blue);
        }

        /* --- NOUVEAUX STYLES & STYLES MODIFIÉS POUR LE CARROUSEL --- */
        .veille-section-container {
            padding-left: 0;
            padding-right: 0;
        }
        .veille-carousel-wrapper {
            position: relative;
        }
        .veille-scroll-container {
            width: 100%;
            overflow: hidden; /* Cache les cartes qui débordent */
        }
        .veille-grid {
            display: flex;
            flex-wrap: nowrap;
            /* Pas de gap, les cartes font 100% de la largeur */
            scroll-behavior: smooth; /* Essentiel pour le défilement fluide en JS */
            -ms-overflow-style: none;  /* Cache la scrollbar sur IE/Edge */
            scrollbar-width: none;  /* Cache la scrollbar sur Firefox */
        }
        .veille-grid::-webkit-scrollbar {
            display: none; /* Cache la scrollbar sur Chrome/Safari */
        }
        .veille-card {
            flex: 0 0 100%; /* Chaque carte prend 100% de la largeur du conteneur */
            box-sizing: border-box; /* Le padding est inclus dans les 100% */
            padding: 25px 50px; /* Espace intérieur pour que le texte ne touche pas les flèches */
            background: #fff; /* Fond blanc pour se démarquer */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Centre le contenu verticalement */
            min-height: 280px; /* Hauteur minimale pour l'alignement */
        }
        .veille-card h4 {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.4em;
            color: var(--dark-blue);
            text-align: center;
        }
        .veille-card p {
            font-size: 1em;
            color: var(--grey-text);
            line-height: 1.6;
            text-align: center;
            flex-grow: 1; /* Permet au contenu de grandir */
        }
        .veille-card .view-article-button {
            display: block;
            width: max-content;
            margin: 20px auto 0;
            padding: 10px 20px;
            background-color: var(--primary-blue);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .veille-card .view-article-button:hover {
            background-color: var(--dark-blue);
        }
        .scroll-arrow {
            background-color: rgba(0, 119, 182, 0.8); /* Fond légèrement transparent */
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 50%;
            font-size: 1.5em;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            transition: background-color 0.2s ease, transform 0.2s ease, opacity 0.3s;
        }
        .scroll-arrow:hover {
            background-color: var(--dark-blue);
            transform: translateY(-50%) scale(1.1);
        }
        .scroll-arrow.left {
            left: 15px; /* Positionnement à l'intérieur */
        }
        .scroll-arrow.right {
            right: 15px; /* Positionnement à l'intérieur */
        }
        .scroll-arrow:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: translateY(-50%) scale(1); /* Annule l'effet de hover */
        }
        /* --- FIN DES STYLES DU CARROUSEL --- */

        .news-ticker-section {
            display: flex;
            align-items: center;
            position: relative;
        }
        .news-ticker-section .icon {
            font-size: 1.5em;
            color: var(--primary-blue);
            margin-right: 15px;
            flex-shrink: 0;
        }
        .news-ticker-container {
            flex-grow: 1;
            overflow: hidden;
            margin-right: 15px;
        }
        .news-ticker-content {
            display: flex;
            white-space: nowrap;
            animation: ticker 30s linear infinite;
        }
        .news-ticker-content:hover {
            animation-play-state: paused;
        }
        .news-item {
            padding-right: 40px;
        }
        .news-item .author-info {
            color: black;
            font-weight: normal;
            font-style: italic;
            font-size: 0.85em;
            margin-left: 5px;
        }
        @keyframes ticker {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .message-button {
            background-color: var(--primary-blue);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: bold;
            text-decoration: none;
            white-space: nowrap;
            transition: background-color 0.2s ease;
            flex-shrink: 0;
        }
        .message-button:hover {
            background-color: var(--dark-blue);
        }
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: auto;
            width: 100%;
        }
        @media (max-width: 768px) {
            .latest-additions-grid {
                grid-template-columns: 1fr;
            }
            .veille-card {
                padding: 20px; /* Moins de padding sur mobile */
                min-height: 250px;
            }
            .scroll-arrow {
                font-size: 1.2em;
                padding: 8px 12px;
            }
            .scroll-arrow.left { left: 5px; }
            .scroll-arrow.right { right: 5px; }
            nav { justify-content: flex-start; overflow-x: auto; }
            .news-ticker-section {
                flex-direction: column;
                align-items: flex-start;
            }
            .news-ticker-section .icon {
                margin-bottom: 10px;
                margin-right: 0;
            }
            .news-ticker-container {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
            .message-button {
                width: 100%;
                text-align: center;
            }
            main {
                padding: 20px 10px;
            }
        }
    </style>
</head>
<body>

    <div class="nav-wrapper">
        <div class="menu-container">
            <nav>
                <a href="index.html" class="active">Accueil</a>
                <a href="equipe.html">Équipe</a>
                <a href="outils.html">Outils</a>
                <a href="galerie.html">Prompts</a>
                <a href="cas-usages.html">Workflows</a>
                <a href="charte.html">Chartes</a>
                <a href="faq.html">FAQ</a>
                <a href="demandes_ia.html">Demandes<span class="notif-bubble" id="notif-count">0</span></a>
                <a href="gestion-license.html">Licenses</a>
            </nav>
        </div>
    </div>

    <main>
        <section class="content-section veille-section-container">
            <h3>Veille IA & Marketing</h3>
            <div class="veille-carousel-wrapper">
                <div class="veille-scroll-container">
                    <div id="veille-articles-grid" class="veille-grid">
                        <div class="veille-card">
                            <h4>⚡ Pourquoi Microsoft encourage à passer à Windows 11</h4>
                            <p>Microsoft fait la promotion de Windows 11 en mettant en avant huit arguments pour encourager les utilisateurs à passer de Windows 10 à son nouvel OS. Parmi ces arguments figurent une interface remaniée plus moderne et ergonomique, un nouveau menu démarrer, l’intégration native de Microsoft Teams, mais également des raisons liées à la performance et à la sécurité.</p>
                            <a href="https://www.lesnumeriques.com/ordinateur-portable/windows-11-voici-les-8-raisons-de-quitter-windows-10-des-maintenant-selon-microsoft-n238625.html" class="view-article-button" target="_blank" rel="noopener noreferrer">Lire l’article</a>
                        </div>
                        <div class="veille-card">
                            <h4>⚡ Apple Intelligence : appel à plus de transparence</h4>
                            <p>L’entreprise Apple mise sur l'intelligence artificielle pour enrichir ses appareils toutefois, des doutes subsistent quant aux réelles performances de ces nouvelles fonctionnalités. Cet article suggère qu'Apple doit être plus transparente sur les limites et les possibilités réelles de sa technologie afin de rassurer ses utilisateurs.</p>
                            <a href="https://www.begeek.fr/pour-ameliorer-apple-intelligence-apple-doit-dabord-etre-transparent-sur-ses-capacites-reelles-416611" class="view-article-button" target="_blank" rel="noopener noreferrer">Lire l’article</a>
                        </div>
                        <div class="veille-card">
                            <h4>⚡ Les outils publicitaires basés sur l’IA de Reddit</h4>
                            <p>Reddit lance une nouvelle fonctionnalité, appelée Reddit Community Intelligence, qui utilise l'IA pour aider les entreprises à comprendre les opinions des utilisateurs sur leurs marques. Il s'agit d'un outil précieux pour les marques qui cherchent à mieux communiquer avec leur public et à comprendre leurs préoccupations et leurs besoins.</p>
                            <a href="https://www.zdnet.fr/actualites/comment-les-nouveaux-outils-publicitaires-ia-de-reddit-aident-les-marques-a-rejoindre-la-conversation-477513.htm" class="view-article-button" target="_blank" rel="noopener noreferrer">Lire l’article</a>
                        </div>
                         <div class="veille-card">
                            <h4>⚡ Restyle : le nouvel outil de montage vidéo par IA de Meta</h4>
                            <p>Meta a récemment lancé un nouvel outil de montage vidéo utilisant l'IA, nommé "Restyle". Cependant, les premiers tests de cette fonctionnalité ont produit des résultats mitigés - certains d'entre eux étant perçus comme étranges ou décevants. Malgré les promesses passionnantes, l'outil semble nécessiter encore du travail.</p>
                            <a href="https://www.generation-nt.com/actualites/meta-ia-video-montage-restyle-instagram-2058970" class="view-article-button" target="_blank" rel="noopener noreferrer">Lire l’article</a>
                        </div>
                        <div class="veille-card">
                            <h4>⚡ Marketing de la peur : décryptage de la fuite présumée de 16 milliards d'identifiants</h4>
                            <p>En juin 2025, la nouvelle d'une violation massive de données concernant 16 milliards de mots de passe circulait dans les médias du monde entier. Cependant, cette fuite potentielle a été critiquée comme étant une tactique de "marketing de la peur" plus qu'autre chose. Cet article analyse les réactions à cette annonce et la pertinence de la menace.</p>
                            <a href="https://www.numerama.com/cyberguerre/1996181-on-est-dans-le-marketing-de-la-peur-des-experts-decryptent-la-fausse-fuite-inedite-de-16-milliards-didentifiants.html" class="view-article-button" target="_blank" rel="noopener noreferrer">Lire l’article</a>
                        </div>
                    </div>
                </div>
                <button class="scroll-arrow left" id="veille-scroll-left"><i class="fas fa-chevron-left"></i></button>
                <button class="scroll-arrow right" id="veille-scroll-right"><i class="fas fa-chevron-right"></i></button>
            </div>
        </section>

        <section class="news-ticker-section content-section">
            <i class="fas fa-newspaper icon"></i>
            <div class="news-ticker-container">
                <div class="news-ticker-content" id="newsTickerContent">
                    <span>Chargement des actualités...</span>
                </div>
            </div>
            <a href="admin-news.html" class="message-button">Laisser un message</a>
        </section>

        <div class="content-section">
            <h2>Derniers ajouts</h2>
            <div id="latest-additions-grid" class="latest-additions-grid">
                <p>Chargement des contenus...</p>
            </div>
        </div>
    </main>
    
    <footer id="footer-placeholder">
        <p>&copy; 2025 Espace IA. Tous droits réservés.</p>
    </footer>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        // --- DÉBUT DE LA PARTIE RESTAURÉE ---

        const GET_TIPS_URL = "/.netlify/functions/get-tips";
        const GET_PROMPTS_URL = "/.netlify/functions/getGalleryPrompts";
        
        const getYouTubeVideoId = (url) => {
            if (!url) return null;
            const match = url.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
            return match ? match[1] : null;
        };

        const isImageUrl = (url) => url && (/\.(gif|jpe?g|tiff?|png|webp|bmp)$/i).test(url);
        const isVideoUrl = (url) => url && (/\.(mp4|webm|ogg)$/i).test(url);

        const createCard = (item, type) => {
            const card = document.createElement("div");
            const chaineCouleur = getChainColor(item.chaine);
            card.style.borderLeft = `5px solid ${chaineCouleur}`;
            card.className = `addition-card ${type}`;

            let mainCardTitle = type === 'galerie' ? 'Dernier prompt partagé' : 'Dernier workflow partagé';
            
            let mediaHtml = '';
            const youtubeVideoId = getYouTubeVideoId(item.firstVideoUrl);

            if (youtubeVideoId) {
                mediaHtml = `<div class="card-image-container"><img src="https://i.ytimg.com/vi/${youtubeVideoId}/hqdefault.jpg" alt="Vignette pour ${escapeHtml(item.titre)}"></div>`;
            } else if (item.imageUrl && item.imageUrl !== 'NO_IMAGE_PLACEHOLDER') {
                mediaHtml = `<div class="card-image-container"><img src="${escapeHtml(item.imageUrl)}" alt="Vignette pour ${escapeHtml(item.titre)}"></div>`;
            } else {
                mediaHtml = `<div class="card-image-container"><i class="fas fa-image fa-3x"></i></div>`;
            }

            const toolBadge = item.outil && item.outil !== 'Non spécifié' ? `<span class="outil-badge">${escapeHtml(item.outil)}</span>` : '';
            
            card.innerHTML = `
                <div class="card-content-wrapper">
                    <div class="card-top-meta">${toolBadge}</div>
                    <h4>${mainCardTitle}</h4>
                    <div class="card-subtitle">${escapeHtml(item.titre)}</div>
                    ${mediaHtml}
                    <div class="card-meta">
                        <span class="meta-line">Chaîne: <strong style="color: ${chaineCouleur};">${escapeHtml(item.chaine)}</strong></span>
                        <span class="meta-line">Créé par: <strong><a href="profil.html?name=${encodeURIComponent(item.auteur)}">${escapeHtml(item.auteur)}</a></strong></span>
                        <span class="meta-line">Créé le: <strong>${formatteDate(item.date)}</strong></span>
                    </div>
                    <p>${escapeHtml(item.description)}</p>
                    <a href="${type === 'cas-usage' ? 'cas-usages.html' : 'galerie.html'}" class="view-button">Voir plus</a>
                </div>`;
            return card;
        };

        const chainColors = { "Auvio Kids": "hotpink", "Auvio": "gold", "La Une": "red", "Tipik": "limegreen", "La Première": "blue", "Vivacité": "orange", "La Trois": "purple", "Classic 21": "#8A2BE2", "Musiq3": "#FF1493", "Autre": "#778899", "Non spécifié": "#CCCCCC" };
        function getChainColor(chaineNom) { return chainColors[chaineNom] || chainColors["Non spécifié"]; }
        function escapeHtml(text) {
            if (text === null || text === undefined) return '';
            const map = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;' };
            return String(text).replace(/[&<>"']/g, m => map[m]);
        }
        function formatteDate(dateString) {
            if (!dateString) return 'Date inconnue';
            try {
                return new Date(dateString).toLocaleDateString('fr-FR', { year: 'numeric', month: 'long', day: 'numeric' });
            } catch (e) { return 'Date invalide'; }
        }

        async function displayLatestAdditions() {
            const container = document.getElementById("latest-additions-grid");
            if (!container) return;
            container.innerHTML = '<p>Chargement des contenus...</p>';
            try {
                const [tipsResponse, promptsResponse] = await Promise.all([ fetch(GET_TIPS_URL), fetch(GET_PROMPTS_URL) ]);
                if (!tipsResponse.ok || !promptsResponse.ok) throw new Error("Erreur réseau.");

                let tips = await tipsResponse.json();
                let prompts = await promptsResponse.json();

                const normalizeItem = (item) => ({
                    ...item,
                    titre: item.titre || "Titre non spécifié",
                    auteur: item.auteur || "Auteur inconnu",
                    description: item.description || item.promptText || 'Pas de description.',
                    date: item.date_creation || item.dateCreation,
                    imageUrl: item.imageUrl || (Array.isArray(item.fileUrls) && item.fileUrls.length > 0 ? item.fileUrls[0] : 'NO_IMAGE_PLACEHOLDER'),
                    firstVideoUrl: (Array.isArray(item.urls) ? item.urls : []).find(url => getYouTubeVideoId(url))
                });

                tips = tips.map(normalizeItem).sort((a, b) => new Date(b.date) - new Date(a.date));
                prompts = prompts.map(normalizeItem).sort((a, b) => new Date(b.date) - new Date(a.date));
                
                container.innerHTML = '';
                let itemsToDisplay = [];
                if (prompts.length > 0) itemsToDisplay.push({ item: prompts[0], type: 'galerie' });
                if (tips.length > 0) itemsToDisplay.push({ item: tips[0], type: 'cas-usage' });

                if (itemsToDisplay.length > 0) {
                    itemsToDisplay.forEach(({ item, type }) => container.appendChild(createCard(item, type)));
                } else {
                    container.innerHTML = '<p>Aucun ajout récent à afficher.</p>';
                }
            } catch (error) {
                container.innerHTML = `<p style="color: red;">Erreur de chargement des contenus.</p>`;
            }
        }

        // --- FIN DE LA PARTIE RESTAURÉE ---


        // --- CODE EXISTANT ET CONSERVÉ ---
        const NEWS_DATA_PATH = 'news-data.json';
        async function loadNewsTicker() {
            const newsTickerContent = document.getElementById('newsTickerContent');
            if (!newsTickerContent) return;
            try {
                const response = await fetch(NEWS_DATA_PATH);
                if (!response.ok) throw new Error('Fichier news introuvable.');
                const newsItems = await response.json();
                if (newsItems.length > 0) {
                    let fullTextHtml = newsItems.map(item => {
                        let fullText = escapeHtml(item.title);
                        if (item.collaborateur && item.collaborateur !== 'Non spécifié') {
                            fullText += `<span class="author-info"> (${escapeHtml(item.collaborateur)})</span>`;
                        }
                        return `<span class="news-item" style="color: ${item.color || '#333'};">${fullText}</span>`;
                    }).join('');
                    newsTickerContent.innerHTML = fullTextHtml + fullTextHtml;
                } else {
                    newsTickerContent.innerHTML = '<span>Aucune actualité.</span>';
                }
            } catch (error) {
                console.error("Erreur chargement news:", error);
            }
        }

        // --- NOUVEAU SCRIPT POUR LE CARROUSEL DE VEILLE ---
        const initVeilleCarousel = () => {
            const grid = document.getElementById('veille-articles-grid');
            const prevButton = document.getElementById('veille-scroll-left');
            const nextButton = document.getElementById('veille-scroll-right');

            if (!grid || !prevButton || !nextButton) {
                console.log("Éléments du carrousel de veille non trouvés. Le carrousel ne sera pas initialisé.");
                return;
            }

            const cards = grid.querySelectorAll('.veille-card');
            if (cards.length <= 1) { // Si 0 ou 1 carte, pas besoin de flèches
                prevButton.style.display = 'none';
                nextButton.style.display = 'none';
                return;
            }

            let currentIndex = 0;

            const updateCarousel = (instant = false) => {
                const cardWidth = grid.clientWidth; // Largeur de la zone visible
                grid.scrollTo({
                    left: cardWidth * currentIndex,
                    behavior: instant ? 'auto' : 'smooth'
                });

                // Mettre à jour l'état des boutons
                prevButton.disabled = currentIndex === 0;
                nextButton.disabled = currentIndex === cards.length - 1;
            };

            nextButton.addEventListener('click', () => {
                if (currentIndex < cards.length - 1) {
                    currentIndex++;
                    updateCarousel();
                }
            });

            prevButton.addEventListener('click', () => {
                if (currentIndex > 0) {
                    currentIndex--;
                    updateCarousel();
                }
            });
            
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                    updateCarousel(true); // Mettre à jour instantanément sans animation
                }, 200);
            });

            // Configuration initiale
            updateCarousel(true);
        };

        const currentPath = window.location.pathname.split('/').pop() || "index.html";
        document.querySelectorAll('nav a').forEach(link => {
            const linkHref = new URL(link.href, window.location.origin).pathname.split('/').pop();
            if (linkHref === currentPath) link.classList.add("active");
        });

        // APPEL DES FONCTIONS
        displayLatestAdditions();
        loadNewsTicker();
        initVeilleCarousel(); // Appel de la nouvelle fonction du carrousel
    });
    </script>

</body>
</html>
