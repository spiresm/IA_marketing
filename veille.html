<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veille IA Marketing</title>
    <link rel="stylesheet" href="style.css" /> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Styles g√©n√©raux pour l'animation d'apparition de la page */
        body {
            opacity: 0;
            transition: opacity 0.5s ease-in; /* Transition plus douce */
            margin: 0;
            font-family: Arial, sans-serif;
            background: #f0f4f8; /* Couleur de fond plus moderne */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        body.show {
            opacity: 1;
        }
        main {
            display: none; /* Main cach√© au d√©but, sera affich√© par le script */
            flex-grow: 1; /* Permet au main de prendre l'espace disponible */
        }
        main.show {
             display: block; /* S'assure que main devient visible */
        }
        #header-placeholder, #footer-placeholder {
            width: 100%;
        }

        /* Conteneur principal de la veille */
        .container {
            max-width: 1000px;
            margin: 40px auto;
            background: #fff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        /* Filtres */
        .filters {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        .filters input,
        .filters select {
            padding: 12px 15px; /* Padding ajust√© */
            border-radius: 10px; /* Bordures plus arrondies */
            border: 1px solid #ddd; /* Couleur de bordure plus douce */
            background: #fdfdfd;
            min-width: 200px;
            font-size: 1em; /* Taille de police plus lisible */
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05); /* Ombre int√©rieure l√©g√®re */
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .filters input:focus,
        .filters select:focus {
            border-color: #0077b6;
            box-shadow: 0 0 0 3px rgba(0, 119, 182, 0.2);
            outline: none;
        }

        /* Styles des cartes d'articles */
        .card {
            background: #ffffff; /* Fond blanc pour les cartes */
            border-left: 5px solid #0077b6; /* Bordure bleue distinctive */
            border-radius: 12px; /* Coins plus arrondis */
            padding: 20px 25px; /* Padding ajust√© */
            margin-bottom: 20px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.08); /* Ombre plus prononc√©e */
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        }
        .card h2 {
            margin: 0 0 10px;
            color: #005f8a; /* Titre bleu fonc√© */
            font-size: 1.6em; /* Taille de titre plus grande */
        }
        .card p {
            margin: 5px 0;
            color: #444; /* Texte principal plus fonc√© */
            line-height: 1.5;
        }
        .card strong {
            color: #222; /* Dates en gras plus fonc√©es */
        }
        .tag {
            background: #e0f2f7; /* Fond de tag bleu clair */
            color: #0077b6; /* Texte de tag bleu */
            padding: 5px 10px; /* Padding ajust√© */
            border-radius: 8px; /* Coins plus arrondis pour les tags */
            font-size: 0.85em; /* Taille de tag l√©g√®rement plus grande */
            font-weight: bold;
            display: inline-block;
            margin-left: 10px; /* Espace entre la date et le tag */
        }
        .source {
            font-size: 0.8em;
            color: #777; /* Source en gris plus clair */
            margin-top: 10px; /* Plus d'espace au-dessus de la source */
        }
        a {
            color: #0077b6; /* Liens bleus */
            text-decoration: none;
            font-weight: bold;
            transition: color 0.2s ease;
        }
        a:hover {
            color: #005f8a; /* Liens bleu fonc√© au survol */
            text-decoration: underline;
        }
        footer {
            text-align: center;
            margin-top: 50px; /* Plus d'espace au-dessus du footer */
            font-size: 0.85em;
            color: #999;
            padding-bottom: 20px;
        }

        /* Media Queries pour la responsivit√© */
        @media (max-width: 768px) {
            .container {
                margin: 20px auto;
                padding: 20px;
            }
            .filters {
                flex-direction: column;
                gap: 15px;
            }
            .filters input,
            .filters select {
                min-width: unset;
                width: 100%;
            }
            .card {
                padding: 15px;
            }
            .card h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div id="header-placeholder"></div>

    <main>
        <div class="container">
            <h1>üì∞ Veille IA & Marketing</h1>
            <div class="filters">
                <input type="search" id="search" placeholder="Rechercher un article..." oninput="filtrerArticles()">
                <select id="filtre-tag" onchange="filtrerArticles()">
                    <option value="">Tous les tags</option>
                    <option value="Marketing Video">Marketing Vid√©o</option>
                    <option value="Comportement des consommateurs">Comportement des consommateurs</option>
                    <option value="Analyse de march√©">Analyse de march√©</option>
                    <option value="Personnalisation">Personnalisation</option>
                    <option value="Cr√©ation de contenu">Cr√©ation de contenu</option>
                    <option value="Intelligence Artificielle">Intelligence Artificielle</option> <option value="Design">Design</option> <option value="Animation">Animation</option> </select>
            </div>
            <div id="articles"></div>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <script>
        // Chemin vers votre fonction Netlify 'proxy'
        const PROXY_URL = "/.netlify/functions/proxy"; 

        // Donn√©es d'articles (peut √™tre remplac√© par un fetch API si n√©cessaire plus tard)
        const articles = [
            {
                titre: "Google DeepMind explore l‚ÄôAGI",
                date: "2024-09-29", // Date ajust√©e pour √™tre plus r√©cente
                tag: "Intelligence Artificielle",
                resume: "Google DeepMind travaille sur l'intelligence g√©n√©rale artificielle pour am√©liorer les algorithmes de marketing.",
                lien: "http://googleblog.com/deepmind_ia_marketing",
                source: "Google Blog"
            },
            {
                titre: "OpenAI annonce un nouveau mod√®le",
                date: "2024-09-29",
                tag: "Intelligence Artificielle",
                resume: "OpenAI a annonc√© un nouveau mod√®le d'IA qui va transformer la strat√©gie marketing des entreprises.",
                lien: "http://openai.com/blog/nouveau_modele",
                source: "OpenAI Blog"
            },
            {
                titre: "Adobe Firefly s‚Äôint√®gre √† Photoshop",
                date: "2024-09-29",
                tag: "Design",
                resume: "Adobe Firefly, outil d'IA, s'int√®gre √† Photoshop pour am√©liorer les outils de design dans le marketing.",
                lien: "http://adobe.com/blog/firefly_photoshop",
                source: "Adobe Blog"
            },
            {
                titre: "Lumiere AI r√©volutionne les animations",
                date: "2024-09-29",
                tag: "Animation",
                resume: "Lumiere AI, une startup, utilise l'IA pour rendre les animations plus r√©alistes et engageantes pour le marketing.",
                lien: "http://techcrunch.com/lumiere_ai_animation",
                source: "TechCrunch"
            },
            {
                titre: "Mistral publie un mod√®le open-source",
                date: "2024-09-29",
                tag: "Intelligence Artificielle",
                resume: "Mistral a publi√© un nouveau mod√®le d'IA open-source qui pourrait √™tre utilis√© pour l'analyse de donn√©es marketing.",
                lien: "http://mistral.ai/blog/modele_open_source",
                source: "Mistral Blog"
            },
            {
                titre: "Midjourney lance un outil vid√©o",
                date: "2025-06-01",
                tag: "Marketing Vid√©o", // Chang√© pour correspondre √† l'option du select
                resume: "Midjourney lance un outil d'IA vid√©o pour optimiser les campagnes marketing.",
                lien: "https://www.midjourney.com/press/video-tool",
                source: "Midjourney Press Release"
            },
            {
                titre: "OpenAI annonce un nouveau mod√®le",
                date: "2025-06-01",
                tag: "Comportement des consommateurs",
                resume: "OpenAI pr√©sente un nouveau mod√®le d'IA pour am√©liorer les pr√©dictions de comportement des consommateurs.",
                lien: "https://www.openai.com/new-model",
                source: "OpenAI Official Announcement"
            },
            {
                titre: "Mistral publie un mod√®le open-source",
                date: "2025-05-30",
                tag: "Analyse de march√©",
                resume: "Mistral publie un nouveau mod√®le open-source d'IA pour aider les entreprises √† comprendre les tendances du march√©.",
                lien: "https://www.mistral.ai/news/open-source-model",
                source: "Mistral Blog"
            },
            {
                titre: "Meta open-source un mod√®le IA",
                date: "2025-05-28",
                tag: "Personnalisation",
                resume: "Meta rend un mod√®le d'IA open-source pour aider les sp√©cialistes du marketing √† personnaliser les exp√©riences utilisateur.",
                lien: "https://about.fb.com/news/ai-model",
                source: "Meta Official Announcement"
            },
            {
                titre: "Runway am√©liore la g√©n√©ration vid√©o",
                date: "2025-05-25",
                tag: "Cr√©ation de contenu",
                resume: "Runway lance une mise √† jour de son outil de g√©n√©ration vid√©o bas√© sur l'IA pour une cr√©ation de contenu plus efficace.",
                lien: "https://www.runwayml.com/updates/video-generator-update",
                source: "Runway Press Release"
            }
        ];

        function renderArticles(liste) {
            const container = document.getElementById('articles');
            container.innerHTML = '';
            if (liste.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Aucun article ne correspond √† vos filtres.</p>';
            }
            liste.sort((a, b) => new Date(b.date) - new Date(a.date)); // Trie par date d√©croissante
            liste.forEach(article => {
                const el = document.createElement('div');
                el.className = 'card';
                el.innerHTML = `
                    <h2>${article.titre}</h2>
                    <p><strong>${new Date(article.date).toLocaleDateString('fr-BE', { year: 'numeric', month: 'long', day: 'numeric' })}</strong> ‚Äì <span class="tag">${article.tag}</span></p>
                    <p>${article.resume}</p>
                    <a href="${article.lien}" target="_blank">Lire l‚Äôarticle ‚Üí</a>
                    <p class="source">Source : ${article.source}</p>
                `;
                container.appendChild(el);
            });
        }

        function filtrerArticles() {
            const search = document.getElementById('search').value.toLowerCase();
            const tag = document.getElementById('filtre-tag').value;
            const filtres = articles.filter(a =>
                (!search || a.titre.toLowerCase().includes(search) || a.resume.toLowerCase().includes(search)) &&
                (!tag || a.tag === tag)
            );
            renderArticles(filtres);
        }

        // Fonction pour mettre √† jour la bulle de notification (identique aux autres pages)
        async function mettreAJourBulleDemandes() {
            const notif = document.getElementById("notif-count");
            if (!notif) {
                console.warn("L'√©l√©ment 'notif-count' n'a pas √©t√© trouv√© dans le header.");
                return;
            }
            try {
                const res = await fetch(`${PROXY_URL}?action=getDemandesIA`);
                if (!res.ok) {
                    console.error(`Erreur HTTP lors de la r√©cup√©ration des demandes: ${res.status}`);
                    throw new Error(`Erreur HTTP: ${res.status}`);
                }
                const demandes = await res.json();
                notif.textContent = demandes.length;
                notif.style.display = demandes.length > 0 ? "inline-block" : "none";
            } catch (e) {
                console.error("Erreur mise √† jour compteur de demandes :", e);
                notif.style.display = "none";
            }
        }

        // Ex√©cution principale √† l'initialisation de la page
        document.addEventListener("DOMContentLoaded", () => {
            // Charger le header
            fetch("header.html")
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Erreur HTTP lors du chargement du header: ${response.status}`);
                    }
                    return response.text();
                })
                .then(data => {
                    document.getElementById("header-placeholder").innerHTML = data;
                    // Rendre le body et le main visibles apr√®s le chargement du header
                    document.body.classList.add("show");
                    const mainElement = document.querySelector("main");
                    if (mainElement) {
                        mainElement.classList.add("show"); // Ajout de la classe show pour main
                    }
                    mettreAJourBulleDemandes(); // Met √† jour la bulle apr√®s que le header soit charg√©
                    // G√©rer les liens actifs du menu (s'il y en a dans header.html)
                    const path = location.pathname.split("/").pop();
                    const links = document.querySelectorAll("#header-placeholder nav a");
                    links.forEach(link => {
                        if (link.getAttribute("href") === path) {
                            link.classList.add("active");
                        }
                    });
                })
                .catch(error => {
                    console.error("Erreur de chargement du header:", error);
                    document.getElementById("header-placeholder").innerHTML = "<p style='color:red;text-align:center'>Erreur de chargement du menu</p>";
                    // Rendre visible m√™me en cas d'erreur du header
                    document.body.classList.add("show");
                    const mainElement = document.querySelector("main");
                    if (mainElement) {
                        mainElement.classList.add("show");
                    }
                });

            // Charger le footer
            fetch("footer.html")
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Erreur HTTP lors du chargement du footer: ${response.status}`);
                    }
                    return response.text();
                })
                .then(data => {
                    document.getElementById("footer-placeholder").innerHTML = data;
                })
                .catch(error => {
                    console.error("Erreur de chargement du footer:", error);
                    document.getElementById("footer-placeholder").innerHTML = "<p style='color:red;text-align:center'>Erreur de chargement du pied de page</p>";
                });

            // Initialiser l'affichage des articles et attacher les √©couteurs d'√©v√©nements
            renderArticles(articles); // Affiche tous les articles au chargement initial
        });
    </script>
</body>
</html>
