<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Demande IA - Espace IA</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* CSS unifié pour l'ensemble du site */
        :root {
            --primary-blue: #0077b6;
            --dark-blue: #005f8a;
            --background-grey: #f0f2f5;
            --grey-text: #555;
            --border-color: #ddd;
        }

        body {
            font-family: 'Segoe UI', 'Inter', sans-serif;
            margin: 0;
            background-color: var(--background-grey);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        main {
            padding: 40px 20px;
            flex-grow: 1;
        }

        /* --- Barre de Navigation --- */
        .nav-wrapper {
            background-color: var(--primary-blue);
            width: 100%;
            position: relative;
            flex-shrink: 0;
            padding: 5px 0;
        }

        .menu-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 30px;
            box-sizing: border-box;
        }

        nav {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }

        nav a {
            text-decoration: none;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
            padding: 10px 18px;
            border-radius: 8px;
            transition: background 0.3s ease;
            margin: 0 5px;
            white-space: nowrap;
            position: relative;
        }

        nav a:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        nav a.active {
            background-color: white;
            color: var(--primary-blue);
        }
        
        .notif-bubble {
            position: absolute; top: 0px; right: 0px; background: red; color: white;
            border-radius: 50%; padding: 2px 6px; font-size: 12px; font-weight: bold;
            display: none;
        }

        /* --- Conteneur principal --- */
        .main-container {
            max-width: 960px;
            margin: 25px auto;
            background-color: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .flex-wrapper {
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }
        
        /* --- Styles du Formulaire --- */
        .form-container {
            flex: 2; /* Prend 2/3 de l'espace */
        }
        .form-container h2 {
            text-align: center;
            color: var(--dark-blue);
            margin-top: 0;
            margin-bottom: 20px;
        }
        form label {
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--grey-text);
        }
        form input, form select, form textarea {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            font-size: 1em;
            background-color: #f9fafb;
            box-sizing: border-box;
        }
        .email-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .email-container input {
            max-width: 200px;
        }
        button[type="submit"] {
            width: 100%;
            background-color: var(--primary-blue);
            color: white;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 25px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        button[type="submit"]:hover {
            background-color: var(--dark-blue);
        }
        
        /* --- Styles du Récapitulatif --- */
        .recap-container {
            flex: 1; /* Prend 1/3 de l'espace */
            background: var(--dark-blue);
            padding: 20px;
            border-radius: 12px;
            color: white;
        }
        .recap-container h3 {
            margin-top: 0;
            text-align: center;
        }
        .recap-container select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 6px;
        }
        .ticket {
            background: white;
            color: var(--grey-text);
            padding: 15px;
            margin-bottom: 10px;
            border-left: 5px solid var(--primary-blue);
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            cursor: pointer;
        }
        
        /* --- Styles de la Modale --- */
        #modal { display: none; /* Autres styles gérés par JS */ }
        
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: auto;
            width: 100%;
        }

        @media (max-width: 768px) {
            .flex-wrapper {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

    <div class="nav-wrapper">
        <div class="menu-container">
            <nav>
                <a href="index.html">Accueil</a>
                <a href="equipe.html">Équipe</a>
                <a href="outils.html">Outils</a>
                <a href="galerie.html">Prompts</a>
                <a href="cas-usages.html">Workflows</a>
                <a href="charte.html">Chartes</a>
                <a href="faq.html">FAQ</a>
                <a href="demandes_ia.html" class="active">Demandes<span class="notif-bubble" id="notif-count"></span></a>
                <a href="gestion-license.html">Licenses</a>
            </nav>
        </div>
    </div>

    <main>
        <div class="main-container">
            <div class="flex-wrapper">
                <div class="form-container">
                    <h2>Formulaire de demande de production IA</h2>
                    <form id="demandeIA">
                        <label for="nom">Nom :</label>
                        <select name="nom" id="nom" required>
                            <option value="">-- Sélectionner --</option>
                        </select>

                        <label for="emailPrefix">Email :</label>
                        <div class="email-container">
                            <input type="text" name="emailPrefix" placeholder="initiales" required />
                            <span>@rtbf.be</span>
                        </div>

                        <label for="besoin">Besoin :</label>
                        <select name="besoin" id="besoin" required>
                            <option value="">-- Sélectionner --</option>
                            <option value="production">Production</option>
                            <option value="formation">Formation</option>
                        </select>

                        <div id="typeContenu-group" class="form-field-group">
                            <label for="typeContenu">Type de contenu :</label>
                            <select name="typeContenu" id="typeContenu">
                                <option value="">-- Sélectionner --</option>
                                <option value="vidéo">Vidéo</option>
                                <option value="audio">Audio</option>
                                <option value="image">Image</option>
                                <option value="voix off IA">Voix off IA</option>
                                <option value="autre">Autre</option>
                            </select>
                        </div>

                        <div id="support-chaine-group" class="form-field-group">
                            <label for="support">Support :</label>
                            <select name="support" id="support">
                                <option value="">-- Sélectionner --</option>
                                <option value="TV">TV</option>
                                <option value="Radio">Radio</option>
                                <option value="Web">Web</option>
                                <option value="RS">Réseaux sociaux</option>
                            </select>

                            <label for="chaine">Chaîne :</label>
                            <select name="chaine" id="chaine">
                                <option value="">-- Sélectionner --</option>
                                <option value="La Une">La Une</option>
                                <option value="Tipik">Tipik</option>
                                <option value="La Trois">La Trois</option>
                                <option value="La première">La première</option>
                                <option value="Classic 21">Classic 21</option>
                                <option value="vivacité">Vivacité</option>
                                <option value="Musiq3">Musiq3</option>
                                <option value="Auvio">Auvio</option>
                            </select>
                        </div>

                        <div id="outils-group" class="form-field-group">
                            <label for="outils">Outils :</label>
                            <select name="outils" id="outils"></select>
                        </div>

                        <div id="duree-group" class="form-field-group">
                            <label for="duree">Durée (secondes) :</label>
                            <input type="number" name="duree" id="duree" min="0">
                        </div>

                        <label for="date">Date de besoin :</label>
                        <input type="date" name="date" required />

                        <label for="description">Briefing :</label>
                        <textarea name="description" rows="5" required></textarea>

                        <button type="submit" id="submitBtn">Envoyer la demande</button>
                    </form>
                </div>

                <div class="recap-container">
                    <h3>Récapitulatif des demandes</h3>
                    <select id="filtreBesoin">
                        <option value="">Filtrer par besoin</option>
                        <option value="production">Production</option>
                        <option value="formation">Formation</option>
                    </select>
                    <select id="filtreParChaine"></select>
                    <div id="recapList"><p style="text-align:center; opacity:0.7;">Chargement...</p></div>
                </div>
            </div>
        </div>
    </main>

    <footer id="footer-placeholder">
        <p>&copy; 2025 Espace IA. Tous droits réservés.</p>
    </footer>
    
    <div id="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center;">
        <div class="modal-content" style="background:white; padding:25px; border-radius:12px; max-width:500px; width:90%; position:relative;">
            <button class="close-modal" style="position:absolute; top:10px; right:15px; background:none; border:none; font-size:1.5rem;">&times;</button>
            <h4 class="modal-title" style="color:var(--dark-blue); margin-top:0;">Détails de la demande</h4>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>
    <div id="toast-container" style="position:fixed; bottom:20px; left:50%; transform:translateX(-50%); z-index:2000;"></div>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        // --- Références DOM ---
        const demandeIAForm = document.getElementById("demandeIA");
        const recapList = document.getElementById("recapList");
        const nomSelect = document.getElementById("nom");
        const besoinSelect = document.getElementById('besoin');
        // ... (les autres références restent les mêmes)

        // --- Données initiales ---
        const allProfiles = [ { "id": "_tfzo5ckx8", "name": "Steeve PIRES MADEIRA" }, { "id": "_k8lx8629j", "name": "Yasmine AIT MASKOUR" }, /* ... autres profils */ ];
        const allTools = [ "ChatGPT", "Claude", "Midjourney", /* ... autres outils */ ];
        
        // --- Fonctions ---
        function showToast(message, type = 'info') { /* ... (logique inchangée) ... */ }
        function populateFormDropdowns() { /* ... (logique inchangée) ... */ }
        function toggleFieldsBasedOnBesoin() { /* ... (logique inchangée) ... */ }
        async function afficherDemandes() { /* ... (logique inchangée, mais assurez-vous que le HTML généré pour .ticket est simple) ... */ }
        function setupEventListeners() { /* ... (logique inchangée) ... */ }
        
        // --- Initialisation ---
        populateFormDropdowns();
        toggleFieldsBasedOnBesoin();
        afficherDemandes();
        setupEventListeners();
    });
    // NOTE : Le code JS complet pour la logique de formulaire, l'affichage, etc.
    // doit être inséré ici. Pour la démonstration du design, seules les fonctions
    // de base sont esquissées.
    </script>
</body>
</html>
